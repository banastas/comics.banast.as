import{r as l}from"./icons-BrV6DUKz.js";import{i as F}from"./data-BsLQUFZs.js";const A={searchTerm:"",seriesName:"",minGrade:.5,maxGrade:10,minPrice:0,maxPrice:1e4,isSlabbed:null,isSigned:null,tags:[]},k=()=>{const[s,d]=l.useState([]),[g,h]=l.useState([]),[i,V]=l.useState(A),[u,S]=l.useState("releaseDate"),[f,P]=l.useState("desc"),[b,w]=l.useState(!0);l.useEffect(()=>{try{d(F)}catch(e){console.error("Error loading comics:",e),d([])}finally{w(!1)}},[]);const L=l.useCallback(e=>{const r={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},t=[...s,r];d(t)},[s]),y=l.useCallback((e,r)=>{const t=s.map(a=>a.id===e?{...a,...r,updatedAt:new Date().toISOString()}:a);d(t)},[s]),G=l.useCallback(e=>{const r=s.filter(t=>t.id!==e);d(r)},[s]);l.useEffect(()=>{let e=[...s];if(i.searchTerm){const r=i.searchTerm.toLowerCase();e=e.filter(t=>t.title.toLowerCase().includes(r)||t.seriesName.toLowerCase().includes(r)||t.notes.toLowerCase().includes(r)||t.signedBy.toLowerCase().includes(r)||t.coverArtist.toLowerCase().includes(r))}i.seriesName&&(e=e.filter(r=>r.seriesName.toLowerCase().includes(i.seriesName.toLowerCase()))),e=e.filter(r=>r.grade>=i.minGrade&&r.grade<=i.maxGrade),e=e.filter(r=>r.purchasePrice>=i.minPrice&&r.purchasePrice<=i.maxPrice),i.isSlabbed!==null&&(e=e.filter(r=>r.isSlabbed===i.isSlabbed)),i.isSigned!==null&&(e=e.filter(r=>i.isSigned?r.signedBy.trim()!=="":r.signedBy.trim()==="")),i.tags.length>0&&(e=e.filter(r=>i.tags.some(t=>r.tags.includes(t)))),e.sort((r,t)=>{let a,o;u==="currentValue"?(a=r.currentValue||r.purchasePrice,o=t.currentValue||t.purchasePrice):(a=r[u],o=t[u]);let n=0;return u==="title"?(n=r.title.localeCompare(t.title),n===0&&(n=r.issueNumber-t.issueNumber)):typeof a=="string"&&typeof o=="string"?n=a.localeCompare(o):typeof a=="number"&&typeof o=="number"&&(n=a-o),f==="asc"?n:-n}),h(e)},[s,i,u,f]);const c=s.filter(e=>e.currentValue!==void 0),m=s.reduce((e,r)=>e+r.purchasePrice,0),p=c.reduce((e,r)=>e+(r.currentValue||0),0),C=p-c.reduce((e,r)=>e+r.purchasePrice,0),D=c.length>0?C/c.reduce((e,r)=>e+r.purchasePrice,0)*100:0,N=c.reduce((e,r)=>{const t=(r.currentValue||0)-r.purchasePrice,a=e?(e.currentValue||0)-e.purchasePrice:-1/0;return t>a?r:e},null),x=c.reduce((e,r)=>{const t=(r.currentValue||0)-r.purchasePrice,a=e?(e.currentValue||0)-e.purchasePrice:1/0;return t<a?r:e},null),I={totalComics:s.length,totalValue:m,totalPurchaseValue:m,totalCurrentValue:p,highestValuedComic:s.reduce((e,r)=>!e||r.purchasePrice>e.purchasePrice?r:e,null),highestValuedSlabbedComic:s.filter(e=>e.isSlabbed).reduce((e,r)=>{const t=r.currentValue||r.purchasePrice,a=e?e.currentValue||e.purchasePrice:0;return t>a?r:e},null),highestValuedRawComic:s.filter(e=>!e.isSlabbed).reduce((e,r)=>{const t=r.currentValue||r.purchasePrice,a=e?e.currentValue||e.purchasePrice:0;return t>a?r:e},null),biggestGainer:N,biggestLoser:x,rawComics:s.filter(e=>!e.isSlabbed).length,slabbedComics:s.filter(e=>e.isSlabbed).length,signedComics:s.filter(e=>e.signedBy.trim()!=="").length,averageGrade:s.length>0?s.reduce((e,r)=>e+r.grade,0)/s.length:0,totalGainLoss:C,totalGainLossPercentage:D,comicsWithCurrentValue:c.length};return{comics:g,allComics:s,stats:I,filters:i,sortField:u,sortDirection:f,loading:b,addComic:L,updateComic:y,deleteComic:G,setFilters:V,setSortField:S,setSortDirection:P}};export{k as u};
