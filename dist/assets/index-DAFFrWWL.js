const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ComicForm-CtHY1ciT.js","assets/components-DbX9iens.js","assets/icons-BH5OHx2U.js","assets/react-vendor-DavUf6mE.js","assets/ComicDetail-Bmyry_VS.js","assets/SeriesDetail-BTQ0WfH6.js","assets/StorageLocationDetail-BmyCEZa4.js","assets/CoverArtistDetail-ByIt1WwM.js","assets/TagDetail-Dj2wX1BW.js","assets/RawComicsDetail-CJdo98As.js","assets/SlabbedComicsDetail-CWqhQE09.js","assets/StorageLocationsListing-DfGKHWGX.js","assets/VariantsDetail-CG6-NH0n.js","assets/CsvConverter-CjmEn3bm.js"])))=>i.map(i=>d[i]);
import{j as e,D as de,C as we,a as ye}from"./components-DbX9iens.js";import{R as p,r as T,C as je,c as Ce,B as ae,d as Ne,F as Ve,G as Le,L as ke,e as Te,f as De,g as Pe,h as Se}from"./icons-BH5OHx2U.js";import{a as _e}from"./react-vendor-DavUf6mE.js";import{i as Re}from"./data-hBCSNks3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();var ee={},me;function Ee(){if(me)return ee;me=1;var s=_e();return ee.createRoot=s.createRoot,ee.hydrateRoot=s.hydrateRoot,ee}var Ae=Ee();const Fe="modulepreload",Ue=function(s){return"/"+s},he={},O=function(o,t,l){let a=Promise.resolve();if(t&&t.length>0){let D=function(v){return Promise.all(v.map(i=>Promise.resolve(i).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");a=D(t.map(v=>{if(v=Ue(v),v in he)return;he[v]=!0;const i=v.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${c}`))return;const w=document.createElement("link");if(w.rel=i?"stylesheet":Fe,i||(w.as="script"),w.crossOrigin="",w.href=v,g&&w.setAttribute("nonce",g),document.head.appendChild(w),i)return new Promise((C,y)=>{w.addEventListener("load",C),w.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${v}`)))})}))}function n(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return a.then(h=>{for(const g of h||[])g.status==="rejected"&&n(g.reason);return o().catch(n)})},xe=s=>{let o;const t=new Set,l=(v,i)=>{const c=typeof v=="function"?v(o):v;if(!Object.is(c,o)){const w=o;o=i??(typeof c!="object"||c===null)?c:Object.assign({},o,c),t.forEach(C=>C(o,w))}},a=()=>o,g={setState:l,getState:a,getInitialState:()=>D,subscribe:v=>(t.add(v),()=>t.delete(v))},D=o=s(l,a,g);return g},Ie=s=>s?xe(s):xe,Be=s=>s;function Oe(s,o=Be){const t=p.useSyncExternalStore(s.subscribe,p.useCallback(()=>o(s.getState()),[s,o]),p.useCallback(()=>o(s.getInitialState()),[s,o]));return p.useDebugValue(t),t}const ge=s=>{const o=Ie(s),t=l=>Oe(o,l);return Object.assign(t,o),t},ze=s=>s?ge(s):ge,se=(s,o,t,l)=>{let a=[...s];if(o.searchTerm){const n=o.searchTerm.toLowerCase();a=a.filter(h=>h.title.toLowerCase().includes(n)||h.seriesName.toLowerCase().includes(n)||h.notes.toLowerCase().includes(n)||h.signedBy.toLowerCase().includes(n)||h.coverArtist.toLowerCase().includes(n))}return o.seriesName&&(a=a.filter(n=>n.seriesName.toLowerCase().includes(o.seriesName.toLowerCase()))),a=a.filter(n=>n.grade>=o.minGrade&&n.grade<=o.maxGrade),a=a.filter(n=>n.purchasePrice>=o.minPrice&&n.purchasePrice<=o.maxPrice),o.isSlabbed!==null&&(a=a.filter(n=>n.isSlabbed===o.isSlabbed)),o.isSigned!==null&&(a=a.filter(n=>o.isSigned?n.signedBy.trim()!=="":n.signedBy.trim()==="")),o.tags.length>0&&(a=a.filter(n=>o.tags.some(h=>n.tags.includes(h)))),a.sort((n,h)=>{let g=n[t],D=h[t];return t==="issueNumber"?(g=parseFloat(g)||0,D=parseFloat(D)||0):t==="releaseDate"||t==="purchaseDate"?(g=new Date(g).getTime(),D=new Date(D).getTime()):typeof g=="string"&&(g=g.toLowerCase(),D=D.toLowerCase()),g<D?l==="asc"?-1:1:g>D?l==="asc"?1:-1:0}),a},$e={searchTerm:"",seriesName:"",minGrade:.5,maxGrade:10,minPrice:0,maxPrice:1e4,isSlabbed:null,isSigned:null,tags:[]},fe=ze((s,o)=>({comics:[],filteredComics:[],filters:$e,sortField:"releaseDate",sortDirection:"desc",loading:!0,showForm:!1,editingComic:void 0,activeTab:"collection",selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,viewMode:"grid",showVirtualBoxes:!1,showCsvConverter:!1,setComics:t=>s(l=>{const a=se(t,l.filters,l.sortField,l.sortDirection);return{comics:t,filteredComics:a}}),setFilteredComics:t=>s({filteredComics:t}),setFilters:t=>s(l=>{const a={...l.filters,...t},n=se(l.comics,a,l.sortField,l.sortDirection);return{filters:a,filteredComics:n}}),setSortField:t=>s(l=>{const a=se(l.comics,l.filters,t,l.sortDirection);return{sortField:t,filteredComics:a}}),setSortDirection:t=>s(l=>{const a=se(l.comics,l.filters,l.sortField,t);return{sortDirection:t,filteredComics:a}}),setLoading:t=>s({loading:t}),setShowForm:t=>s({showForm:t}),setEditingComic:t=>s({editingComic:t}),setActiveTab:t=>s({activeTab:t}),setSelectedComic:t=>s({selectedComic:t}),setSelectedSeries:t=>s({selectedSeries:t}),setSelectedStorageLocation:t=>s({selectedStorageLocation:t}),setSelectedCoverArtist:t=>s({selectedCoverArtist:t}),setSelectedTag:t=>s({selectedTag:t}),setSelectedCondition:t=>s({selectedCondition:t}),setViewMode:t=>s({viewMode:t}),setShowVirtualBoxes:t=>s({showVirtualBoxes:t}),setShowCsvConverter:t=>s({showCsvConverter:t}),addComic:t=>{const l={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(a=>({comics:[...a.comics,l],showForm:!1,editingComic:void 0}))},updateComic:(t,l)=>{s(a=>({comics:a.comics.map(n=>n.id===t?{...n,...l,updatedAt:new Date().toISOString()}:n),showForm:!1,editingComic:void 0}))},deleteComic:t=>{s(l=>({comics:l.comics.filter(a=>a.id!==t)}))},navigateToComic:t=>s({selectedComic:t,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToSeries:t=>s({selectedSeries:t,selectedComic:void 0,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToStorageLocation:t=>s({selectedStorageLocation:t,selectedComic:void 0,selectedSeries:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCoverArtist:t=>s({selectedCoverArtist:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToTag:t=>s({selectedTag:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCondition:t=>s({selectedCondition:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToVirtualBoxes:()=>s({showVirtualBoxes:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showCsvConverter:!1}),navigateToCsvConverter:()=>s({showCsvConverter:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1}),backToCollection:()=>s({selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1,showForm:!1,editingComic:void 0}),get stats(){const t=o(),l=t.comics.filter(i=>i.currentValue!==void 0),a=t.comics.reduce((i,c)=>i+(c.purchasePrice||0),0),n=l.reduce((i,c)=>i+(c.currentValue||0),0),h=n-l.reduce((i,c)=>i+(c.purchasePrice||0),0),g=l.length>0?h/l.reduce((i,c)=>i+(c.purchasePrice||0),0)*100:0,D=l.reduce((i,c)=>{const w=(c.currentValue||0)-(c.purchasePrice||0),C=i?(i.currentValue||0)-(i.purchasePrice||0):-1/0;return w>C?c:i},null),v=l.reduce((i,c)=>{const w=(c.currentValue||0)-(c.purchasePrice||0),C=i?(i.currentValue||0)-(i.purchasePrice||0):1/0;return w<C?c:i},null);return{totalComics:t.comics.length,totalValue:a,totalPurchaseValue:a,totalCurrentValue:n,highestValuedComic:t.comics.reduce((i,c)=>!i||c.purchasePrice>i.purchasePrice?c:i,null),highestValuedSlabbedComic:t.comics.filter(i=>i.isSlabbed).reduce((i,c)=>{const w=c.currentValue||c.purchasePrice,C=i?i.currentValue||i.purchasePrice:0;return w>C?c:i},null),highestValuedRawComic:t.comics.filter(i=>!i.isSlabbed).reduce((i,c)=>{const w=c.currentValue||c.purchasePrice,C=i?i.currentValue||i.purchasePrice:0;return w>C?c:i},null),biggestGainer:D,biggestLoser:v,rawComics:t.comics.filter(i=>!i.isSlabbed).length,slabbedComics:t.comics.filter(i=>i.isSlabbed).length,signedComics:t.comics.filter(i=>i.signedBy.trim()!=="").length,averageGrade:t.comics.length>0?t.comics.reduce((i,c)=>i+c.grade,0)/t.comics.length:0,totalGainLoss:h,totalGainLossPercentage:g,comicsWithCurrentValue:l.length}},get allSeries(){return Array.from(new Set(o().comics.map(t=>t.seriesName))).sort()},get allVirtualBoxes(){return Array.from(new Set(o().comics.map(t=>t.storageLocation).filter(Boolean))).sort()},get variantsCount(){return o().comics.filter(t=>t.isVariant).length}})),Me=()=>{const s=fe.getState();if(s.comics.length===0)try{s.setComics(Re),s.setLoading(!1)}catch(o){console.error("Error loading comics:",o),s.setComics([]),s.setLoading(!1)}},Ge=()=>{const s=window.location.hash.slice(1),[o,t]=s.split("?"),l={};if(t){const a=new URLSearchParams(t);a.has("tab")&&(l.tab=a.get("tab")),a.has("view")&&(l.viewMode=a.get("view")),a.has("search")&&(l.searchTerm=a.get("search")||void 0),a.has("sort")&&(l.sortField=a.get("sort")||void 0),a.has("order")&&(l.sortDirection=a.get("order"))}return{route:o||"/",params:l}},We=s=>{const o=s.split("/").filter(Boolean),t={};if(o.length===0)return{type:"home",params:t};const[l,...a]=o;switch(l){case"comic":a.length>0&&(t.comicId=decodeURIComponent(a[0]));break;case"series":a.length>0&&(t.seriesName=decodeURIComponent(a[0]));break;case"storage":a.length>0&&(t.storageLocation=decodeURIComponent(a[0]));break;case"artist":a.length>0&&(t.coverArtist=decodeURIComponent(a[0]));break;case"tag":a.length>0&&(t.tag=decodeURIComponent(a[0]));break;case"raw":t.condition="raw";break;case"slabbed":t.condition="slabbed";break;case"variants":t.condition="variants";break;case"boxes":break;case"csv":break;case"collection":case"stats":t.tab=l;break}return{type:l,params:t}},qe=(s,o=!1)=>{o?window.history.replaceState(null,"",s):window.history.pushState(null,"",s),window.dispatchEvent(new CustomEvent("urlchange",{detail:{url:s}}))},Ke=async s=>{try{return await navigator.clipboard.writeText(s),!0}catch(o){return console.error("Failed to copy URL to clipboard:",o),!1}},Ye=()=>window.location.href,He=({activeTab:s,selectedComic:o,selectedSeries:t,selectedStorageLocation:l,selectedCoverArtist:a,selectedTag:n,selectedCondition:h,showVirtualBoxes:g,showCsvConverter:D,viewMode:v,searchTerm:i,sortField:c,sortDirection:w,setActiveTab:C,setSelectedComic:y,setSelectedSeries:L,setSelectedStorageLocation:u,setSelectedCoverArtist:N,setSelectedTag:V,setSelectedCondition:f,setShowVirtualBoxes:j,setShowCsvConverter:b,setViewMode:G,setFilters:R,setSortField:W,setSortDirection:E,allComics:q})=>{const A=T.useCallback((k,d,S,_=!1)=>{y(void 0),L(null),u(null),N(null),V(null),f(null),j(!1),b(!1);let x="";switch(k){case"home":x="/";break;case"collection":x="/collection";break;case"stats":x="/stats";break;case"comic":x=`/comic/${encodeURIComponent(d||"")}`;break;case"series":x=`/series/${encodeURIComponent(d||"")}`;break;case"storage":x=`/storage/${encodeURIComponent(d||"")}`;break;case"artist":x=`/artist/${encodeURIComponent(d||"")}`;break;case"tag":x=`/tag/${encodeURIComponent(d||"")}`;break;case"raw":x="/raw";break;case"slabbed":x="/slabbed";break;case"variants":x="/variants";break;case"boxes":x="/boxes";break;case"csv":x="/csv";break;default:x="/"}const I=new URLSearchParams;S?.tab&&I.set("tab",S.tab),S?.viewMode&&I.set("view",S.viewMode),S?.searchTerm&&I.set("search",S.searchTerm),S?.sortField&&I.set("sort",S.sortField),S?.sortDirection&&I.set("order",S.sortDirection);const K=I.toString(),Y=x+(K?`?${K}`:"");qe(`#${Y}`,_)},[y,L,u,N,V,f,j,b]),U=T.useCallback(()=>{const{route:k,params:d}=Ge(),{type:S,params:_}=We(k);switch(d.tab&&d.tab!==s&&C(d.tab),d.viewMode&&d.viewMode!==v&&G(d.viewMode),d.searchTerm!==void 0&&d.searchTerm!==i&&R({searchTerm:d.searchTerm}),d.sortField&&d.sortField!==c&&W(d.sortField),d.sortDirection&&d.sortDirection!==w&&E(d.sortDirection),S){case"home":case"collection":y(void 0),L(null),u(null),N(null),V(null),f(null),j(!1),b(!1);break;case"stats":C("stats"),y(void 0),L(null),u(null),N(null),V(null),f(null),j(!1),b(!1);break;case"comic":if(_.comicId){const x=q.find(I=>I.id===_.comicId);x&&(y(x),L(null),u(null),N(null),V(null),f(null),j(!1),b(!1))}break;case"series":_.seriesName&&(L(_.seriesName),y(void 0),u(null),N(null),V(null),f(null),j(!1),b(!1));break;case"storage":_.storageLocation&&(u(_.storageLocation),y(void 0),L(null),N(null),V(null),f(null),j(!1),b(!1));break;case"artist":_.coverArtist&&(N(_.coverArtist),y(void 0),L(null),u(null),V(null),f(null),j(!1),b(!1));break;case"tag":_.tag&&(V(_.tag),y(void 0),L(null),u(null),N(null),f(null),j(!1),b(!1));break;case"raw":f("raw"),y(void 0),L(null),u(null),N(null),V(null),j(!1),b(!1);break;case"slabbed":f("slabbed"),y(void 0),L(null),u(null),N(null),V(null),j(!1),b(!1);break;case"variants":f("variants"),y(void 0),L(null),u(null),N(null),V(null),j(!1),b(!1);break;case"boxes":j(!0),y(void 0),L(null),u(null),N(null),V(null),f(null),b(!1);break;case"csv":b(!0),y(void 0),L(null),u(null),N(null),V(null),f(null),j(!1);break}},[s,v,i,c,w,q,C,G,R,W,E,y,L,u,N,V,f,j,b]);return T.useEffect(()=>{U();const k=()=>{U()},d=()=>{U()};return window.addEventListener("popstate",k),window.addEventListener("urlchange",d),()=>{window.removeEventListener("popstate",k),window.removeEventListener("urlchange",d)}},[U]),{navigateToRoute:A}},Je=({className:s="",title:o="Share URL",size:t=16})=>{const[l,a]=T.useState(!1),n=async()=>{const h=Ye();await Ke(h)&&(a(!0),setTimeout(()=>a(!1),2e3))};return e.jsx("button",{onClick:n,className:`p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors ${s}`,title:o,children:l?e.jsx(je,{size:t,className:"text-green-400"}):e.jsx(Ce,{size:t})})},Qe=p.lazy(()=>O(()=>import("./ComicForm-CtHY1ciT.js"),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.ComicForm}))),Xe=p.lazy(()=>O(()=>import("./ComicDetail-Bmyry_VS.js"),__vite__mapDeps([4,1,2,3])).then(s=>({default:s.ComicDetail}))),Ze=p.lazy(()=>O(()=>import("./SeriesDetail-BTQ0WfH6.js"),__vite__mapDeps([5,1,2,3])).then(s=>({default:s.SeriesDetail}))),es=p.lazy(()=>O(()=>import("./StorageLocationDetail-BmyCEZa4.js"),__vite__mapDeps([6,1,2,3])).then(s=>({default:s.StorageLocationDetail}))),ss=p.lazy(()=>O(()=>import("./CoverArtistDetail-ByIt1WwM.js"),__vite__mapDeps([7,1,2,3])).then(s=>({default:s.CoverArtistDetail}))),ts=p.lazy(()=>O(()=>import("./TagDetail-Dj2wX1BW.js"),__vite__mapDeps([8,1,2,3])).then(s=>({default:s.TagDetail}))),rs=p.lazy(()=>O(()=>import("./RawComicsDetail-CJdo98As.js"),__vite__mapDeps([9,1,2,3])).then(s=>({default:s.RawComicsDetail}))),as=p.lazy(()=>O(()=>import("./SlabbedComicsDetail-CWqhQE09.js"),__vite__mapDeps([10,1,2,3])).then(s=>({default:s.SlabbedComicsDetail}))),ls=p.lazy(()=>O(()=>import("./StorageLocationsListing-DfGKHWGX.js"),__vite__mapDeps([11,1,2,3])).then(s=>({default:s.StorageLocationsListing}))),ns=p.lazy(()=>O(()=>import("./VariantsDetail-CG6-NH0n.js"),__vite__mapDeps([12,1,2,3])).then(s=>({default:s.VariantsDetail}))),is=p.lazy(()=>O(()=>import("./CsvConverter-CjmEn3bm.js"),__vite__mapDeps([13,1,2,3])).then(s=>({default:s.CsvConverter}))),B=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading..."})]})});function os(){const{comics:s,filteredComics:o,stats:t,filters:l,sortField:a,sortDirection:n,loading:h,addComic:g,updateComic:D,setFilters:v,setSortField:i,setSortDirection:c}=fe();T.useEffect(()=>{Me()},[]);const[w,C]=T.useState(!1),[y,L]=T.useState(void 0),[u,N]=T.useState("collection"),[V,f]=T.useState(void 0),[j,b]=T.useState(null),[G,R]=T.useState(null),[W,E]=T.useState(null),[q,A]=T.useState(null),[U,k]=T.useState(null),[d,S]=T.useState("grid"),[_,x]=T.useState(!1),[I,K]=T.useState(!1),Y=Array.from(new Set(s.map(r=>r.seriesName))).sort(),J=Array.from(new Set(s.map(r=>r.storageLocation).filter(Boolean))).sort(),le=s.filter(r=>r.isVariant).length,{navigateToRoute:P}=He({activeTab:u,selectedComic:V,selectedSeries:j,selectedStorageLocation:G,selectedCoverArtist:W,selectedTag:q,selectedCondition:U,showVirtualBoxes:_,showCsvConverter:I,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n,setActiveTab:N,setSelectedComic:f,setSelectedSeries:b,setSelectedStorageLocation:R,setSelectedCoverArtist:E,setSelectedTag:A,setSelectedCondition:k,setShowVirtualBoxes:x,setShowCsvConverter:K,setViewMode:S,setFilters:v,setSortField:i,setSortDirection:c,allComics:s}),be=r=>{y?D(y.id,r):g(r),C(!1),L(void 0)},F=r=>{f(r),b(null),R(null),E(null),A(null),k(null),x(!1),P("comic",r.id,{tab:u})},z=()=>{f(void 0),b(null),R(null),E(null),A(null),k(null),x(!1),K(!1),P("collection",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},$=r=>{b(r),f(void 0),R(null),E(null),A(null),k(null),x(!1),P("series",r,{tab:u})},te=r=>{R(r),f(void 0),b(null),E(null),A(null),k(null),x(!1),P("storage",r,{tab:u})},pe=r=>{E(r),f(void 0),b(null),R(null),A(null),k(null),x(!1),P("artist",r,{tab:u})},ne=r=>{A(r),f(void 0),b(null),R(null),E(null),k(null),x(!1),P("tag",r,{tab:u})},Q=()=>{k("raw"),f(void 0),b(null),R(null),E(null),A(null),x(!1),P("raw",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},X=()=>{k("slabbed"),f(void 0),b(null),R(null),E(null),A(null),x(!1),P("slabbed",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},ie=()=>{k("variants"),f(void 0),b(null),R(null),E(null),A(null),x(!1),P("variants",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},oe=()=>{x(!0),f(void 0),b(null),R(null),E(null),A(null),k(null),K(!1),P("boxes",void 0,{tab:u})};if(h)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading your collection..."})]})});if(I)return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(is,{onBack:z})});if(_)return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ls,{allComics:s,onBack:z,onViewStorageLocation:te})});if(V)return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Xe,{comic:V,allComics:s,onBack:z,onView:F,onViewSeries:$,onViewStorageLocation:te,onViewCoverArtist:pe,onViewTag:ne,onViewRawComics:Q,onViewSlabbedComics:X})});if(j){const r=s.filter(m=>m.seriesName===j);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Ze,{seriesName:j||"",seriesComics:r,onBack:z,onView:F})})}if(G){const r=s.filter(m=>m.storageLocation===G);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(es,{storageLocation:G||"",locationComics:r,onBack:z,onView:F,onViewSeries:$})})}if(W){const r=s.filter(m=>m.coverArtist===W);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ss,{coverArtist:W||"",artistComics:r,onBack:z,onView:F,onViewSeries:$})})}if(q){const r=s.filter(m=>m.tags.includes(q||""));return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ts,{tag:q||"",tagComics:r,onBack:z,onView:F,onViewSeries:$,onViewTag:ne})})}if(U==="raw"){const r=s.filter(m=>!m.isSlabbed);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(rs,{rawComics:r,onBack:z,onView:F,onViewSeries:$})})}if(U==="slabbed"){const r=s.filter(m=>m.isSlabbed);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(as,{slabbedComics:r,onBack:z,onView:F,onViewSeries:$})})}if(U==="variants"){const r=s.filter(m=>m.isVariant);return e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(ns,{variantComics:r,onBack:z,onView:F,onViewRawComics:Q,onViewSlabbedComics:X,onViewSeries:$})})}return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-lg",children:e.jsx(ae,{size:24,className:"text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"comics.banast.as"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:[t.totalComics," comics"]})]})]}),u==="collection"&&e.jsx("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-1 max-w-2xl mx-4",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ne,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search comics...",value:l.searchTerm,onChange:r=>{v({...l,searchTerm:r.target.value}),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:d,searchTerm:r.target.value,sortField:a,sortDirection:n})},className:"w-full pl-9 pr-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm"})]})}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsx(Je,{title:"Copy URL to clipboard"}),u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>K(!0),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"CSV Converter",children:e.jsx(Ve,{size:16})}),e.jsxs("div",{className:"flex items-center space-x-2 border border-gray-600 rounded-lg",children:[e.jsx("button",{onClick:()=>{S("grid"),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"grid",searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`p-2 rounded-l-lg transition-colors ${d==="grid"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(Le,{size:16})}),e.jsx("button",{onClick:()=>{S("list"),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"list",searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`p-2 rounded-r-lg transition-colors ${d==="list"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(ke,{size:16})})]}),e.jsxs("select",{value:a,onChange:r=>{i(r.target.value),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:r.target.value,sortDirection:n})},className:"bg-gray-700 border border-gray-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm text-white",children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"seriesName",children:"Sort by Series"}),e.jsx("option",{value:"issueNumber",children:"Sort by Issue #"}),e.jsx("option",{value:"releaseDate",children:"Sort by Release Date"}),e.jsx("option",{value:"grade",children:"Sort by Grade"}),e.jsx("option",{value:"purchasePrice",children:"Sort by Purchase Price"}),e.jsx("option",{value:"currentValue",children:"Sort by Current Value"}),e.jsx("option",{value:"purchaseDate",children:"Sort by Purchase Date"})]}),e.jsx("button",{onClick:()=>{const r=n==="asc"?"desc":"asc";c(r),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:r})},className:"p-1.5 sm:p-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors text-gray-300",children:n==="asc"?e.jsx(Te,{size:14,className:"sm:w-4 sm:h-4"}):e.jsx(De,{size:14,className:"sm:w-4 sm:h-4"})})]})]})]})})}),e.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>{N("collection"),P("collection",void 0,{tab:"collection",viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="collection"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Collection"})]})}),e.jsx("button",{onClick:()=>{N("stats"),P("stats",void 0,{tab:"stats",viewMode:d,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="stats"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(Pe,{size:16}),e.jsx("span",{children:"Statistics"})]})})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:[u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 sm:pt-6 lg:pt-8",children:e.jsx(de,{stats:t,onViewComic:F,onViewRawComics:Q,onViewSlabbedComics:X,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:J.length,variantsCount:le})}),o.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(ae,{size:48,className:"mx-auto text-gray-500 mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-white mb-2",children:s.length===0?"No comics in your collection":"No comics match your filters"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-400 mb-4 sm:mb-6 px-4",children:s.length===0?"Start building your collection by adding your first comic!":"Try adjusting your search criteria or filters."}),s.length===0&&e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors mx-auto shadow-lg",children:[e.jsx(Se,{size:20}),e.jsx("span",{children:"Add Your First Comic"})]})]}):e.jsx(e.Fragment,{children:d==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:o.map(r=>e.jsx(we,{comic:r,onView:F},r.id))}):e.jsx(ye,{comics:o,onView:F})})]}),u==="stats"&&e.jsxs("div",{className:"space-y-8 pt-4 sm:pt-6 lg:pt-8",children:[e.jsx(de,{stats:t,showDetailed:u==="stats",onViewComic:F,onViewRawComics:Q,onViewSlabbedComics:X,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:J.length,variantsCount:le,hideSlabbedCard:U==="slabbed",hideRawCard:U==="raw"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.comicsWithCurrentValue>0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Series Performance"}),Y.length>0?e.jsx("div",{className:"space-y-3",children:Y.map(r=>{const m=s.filter(H=>H.seriesName===r),M=m.filter(H=>H.currentValue!==void 0),Z=M.reduce((H,re)=>H+(re.purchasePrice||0),0),ce=M.reduce((H,re)=>H+(re.currentValue||0),0),ue=ce-Z,ve=Z>0?ue/Z*100:0;return{name:r,count:m.length,countWithValue:M.length,purchaseValue:Z,currentValue:ce,gainLoss:ue,gainLossPercentage:ve}}).filter(r=>r.countWithValue>0).sort((r,m)=>Math.abs(m.gainLossPercentage)-Math.abs(r.gainLossPercentage)).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>$(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.countWithValue," of ",r.count," comics valued"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),e.jsxs("p",{className:`text-sm font-medium ${r.gainLoss>=0?"text-emerald-400":"text-red-400"}`,children:[r.gainLoss>=0?"+":"",(r.gainLoss||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})," (",(r.gainLossPercentage||0)>=0?"+":"",(r.gainLossPercentage||0).toFixed(1),"%)"]})]})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series performance data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Series by Count"}),Y.length>0?e.jsx("div",{className:"space-y-3",children:Y.map(r=>({name:r,count:s.filter(m=>m.seriesName===r).length,value:s.filter(m=>m.seriesName===r).reduce((m,M)=>m+(M.purchasePrice||0),0)})).sort((r,m)=>m.count-r.count).slice(0,10).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>$(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Additions"}),s.length>0?e.jsx("div",{className:"space-y-3",children:s.sort((r,m)=>new Date(m.createdAt).getTime()-new Date(r.createdAt).getTime()).slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>F(r),children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white hover:text-blue-400 transition-colors",onClick:m=>{m.stopPropagation(),$(r.seriesName)},children:[r.seriesName," #",r.issueNumber]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Added ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.purchasePrice||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),r.currentValue&&e.jsxs("p",{className:`text-xs ${(r.currentValue||0)>=(r.purchasePrice||0)?"text-emerald-400":"text-red-400"}`,children:["Now: ",(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}),(r.purchasePrice||0)>0&&` (${(r.currentValue||0)>=(r.purchasePrice||0)?"+":""}${(((r.currentValue||0)-(r.purchasePrice||0))/(r.purchasePrice||0)*100).toFixed(1)}%)`]})]})]},r.id))}):e.jsx("p",{className:"text-gray-400",children:"No comics added yet"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Virtual Boxes"}),J.length>0?e.jsx("div",{className:"space-y-3",children:J.map(r=>({name:r,count:s.filter(m=>m.storageLocation===r).length,value:s.filter(m=>m.storageLocation===r).reduce((m,M)=>m+(M.currentValue||M.purchasePrice||0),0)})).sort((r,m)=>m.value-r.value).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>te(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No virtual boxes specified"})]})]})]})]}),w&&e.jsx(p.Suspense,{fallback:e.jsx(B,{}),children:e.jsx(Qe,{comic:y,onSave:be,onCancel:()=>{C(!1),L(void 0)},allSeries:Y,allVirtualBoxes:J})})]})}Ae.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(os,{})}));
