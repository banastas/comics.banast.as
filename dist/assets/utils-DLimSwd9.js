import{r as l}from"./icons-BrV6DUKz.js";import{i as F}from"./data-BsLQUFZs.js";const A={searchTerm:"",seriesName:"",minGrade:.5,maxGrade:10,minPrice:0,maxPrice:1e4,isSlabbed:null,isSigned:null,tags:[]},k=()=>{const[s,d]=l.useState([]),[g,h]=l.useState([]),[i,V]=l.useState(A),[u,S]=l.useState("title"),[f,P]=l.useState("asc"),[b,w]=l.useState(!0);l.useEffect(()=>{try{d(F)}catch(e){console.error("Error loading comics:",e),d([])}finally{w(!1)}},[]);const L=l.useCallback(e=>{const t={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},r=[...s,t];d(r)},[s]),y=l.useCallback((e,t)=>{const r=s.map(a=>a.id===e?{...a,...t,updatedAt:new Date().toISOString()}:a);d(r)},[s]),G=l.useCallback(e=>{const t=s.filter(r=>r.id!==e);d(t)},[s]);l.useEffect(()=>{let e=[...s];if(i.searchTerm){const t=i.searchTerm.toLowerCase();e=e.filter(r=>r.title.toLowerCase().includes(t)||r.seriesName.toLowerCase().includes(t)||r.notes.toLowerCase().includes(t)||r.signedBy.toLowerCase().includes(t)||r.coverArtist.toLowerCase().includes(t))}i.seriesName&&(e=e.filter(t=>t.seriesName.toLowerCase().includes(i.seriesName.toLowerCase()))),e=e.filter(t=>t.grade>=i.minGrade&&t.grade<=i.maxGrade),e=e.filter(t=>t.purchasePrice>=i.minPrice&&t.purchasePrice<=i.maxPrice),i.isSlabbed!==null&&(e=e.filter(t=>t.isSlabbed===i.isSlabbed)),i.isSigned!==null&&(e=e.filter(t=>i.isSigned?t.signedBy.trim()!=="":t.signedBy.trim()==="")),i.tags.length>0&&(e=e.filter(t=>i.tags.some(r=>t.tags.includes(r)))),e.sort((t,r)=>{let a,o;u==="currentValue"?(a=t.currentValue||t.purchasePrice,o=r.currentValue||r.purchasePrice):(a=t[u],o=r[u]);let n=0;return u==="title"?(n=t.title.localeCompare(r.title),n===0&&(n=t.issueNumber-r.issueNumber)):typeof a=="string"&&typeof o=="string"?n=a.localeCompare(o):typeof a=="number"&&typeof o=="number"&&(n=a-o),f==="asc"?n:-n}),h(e)},[s,i,u,f]);const c=s.filter(e=>e.currentValue!==void 0),m=s.reduce((e,t)=>e+t.purchasePrice,0),p=c.reduce((e,t)=>e+(t.currentValue||0),0),C=p-c.reduce((e,t)=>e+t.purchasePrice,0),D=c.length>0?C/c.reduce((e,t)=>e+t.purchasePrice,0)*100:0,N=c.reduce((e,t)=>{const r=(t.currentValue||0)-t.purchasePrice,a=e?(e.currentValue||0)-e.purchasePrice:-1/0;return r>a?t:e},null),x=c.reduce((e,t)=>{const r=(t.currentValue||0)-t.purchasePrice,a=e?(e.currentValue||0)-e.purchasePrice:1/0;return r<a?t:e},null),I={totalComics:s.length,totalValue:m,totalPurchaseValue:m,totalCurrentValue:p,highestValuedComic:s.reduce((e,t)=>!e||t.purchasePrice>e.purchasePrice?t:e,null),highestValuedSlabbedComic:s.filter(e=>e.isSlabbed).reduce((e,t)=>{const r=t.currentValue||t.purchasePrice,a=e?e.currentValue||e.purchasePrice:0;return r>a?t:e},null),highestValuedRawComic:s.filter(e=>!e.isSlabbed).reduce((e,t)=>{const r=t.currentValue||t.purchasePrice,a=e?e.currentValue||e.purchasePrice:0;return r>a?t:e},null),biggestGainer:N,biggestLoser:x,rawComics:s.filter(e=>!e.isSlabbed).length,slabbedComics:s.filter(e=>e.isSlabbed).length,signedComics:s.filter(e=>e.signedBy.trim()!=="").length,averageGrade:s.length>0?s.reduce((e,t)=>e+t.grade,0)/s.length:0,totalGainLoss:C,totalGainLossPercentage:D,comicsWithCurrentValue:c.length};return{comics:g,allComics:s,stats:I,filters:i,sortField:u,sortDirection:f,loading:b,addComic:L,updateComic:y,deleteComic:G,setFilters:V,setSortField:S,setSortDirection:P}};export{k as u};
