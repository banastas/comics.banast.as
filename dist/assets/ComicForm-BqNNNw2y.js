import{j as e}from"./components-DDKdaXoU.js";import{r as n,X as b,i as w}from"./icons-BH5OHx2U.js";import"./react-vendor-DavUf6mE.js";const k=[10,9.9,9.8,9.6,9.4,9.2,9,8.5,8,7.5,7,6.5,6,5.5,5,4.5,4,3.5,3,2.5,2,1.8,1.5,1,.5],P=({comic:a,onSave:p,onCancel:x,allSeries:h,allVirtualBoxes:y})=>{const[t,o]=n.useState({title:"",seriesName:"",issueNumber:1,releaseDate:"",coverImageUrl:"",coverArtist:"",grade:9,purchasePrice:0,purchaseDate:new Date().toISOString().split("T")[0],currentValue:void 0,notes:"",signedBy:"",storageLocation:"",tags:[],isSlabbed:!1,isVariant:!1,isGraphicNovel:!1}),[d,u]=n.useState(""),[r,m]=n.useState({});n.useEffect(()=>{a&&o({title:a.title,seriesName:a.seriesName,issueNumber:a.issueNumber,releaseDate:a.releaseDate,coverImageUrl:a.coverImageUrl,coverArtist:a.coverArtist,grade:a.grade,purchasePrice:a.purchasePrice,purchaseDate:a.purchaseDate,currentValue:a.currentValue,notes:a.notes,signedBy:a.signedBy,storageLocation:a.storageLocation,tags:[...a.tags],isSlabbed:a.isSlabbed,isVariant:a.isVariant||!1,isGraphicNovel:a.isGraphicNovel||!1})},[a]);const l=(s,c)=>{o(i=>({...i,[s]:c})),r[s]&&m(i=>({...i,[s]:""}))},g=()=>{d.trim()&&!t.tags.includes(d.trim())&&(o(s=>({...s,tags:[...s.tags,d.trim()]})),u(""))},f=s=>{o(c=>({...c,tags:c.tags.filter(i=>i!==s)}))},v=()=>{const s={};return t.title.trim()||(s.title="Title is required"),t.seriesName.trim()||(s.seriesName="Series name is required"),t.issueNumber<0&&(s.issueNumber="Issue number must be positive"),t.releaseDate||(s.releaseDate="Release date is required"),(t.grade<.5||t.grade>10)&&(s.grade="Grade must be between 0.5 and 10"),t.purchasePrice<0&&(s.purchasePrice="Purchase price must be positive"),t.purchaseDate||(s.purchaseDate="Purchase date is required"),m(s),Object.keys(s).length===0},j=s=>{s.preventDefault(),v()&&p(t)},N=s=>{s.key==="Enter"&&s.target===s.currentTarget&&(s.preventDefault(),g())};return e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-2 sm:p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto border border-gray-700",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:a?"Edit Comic":"Add New Comic"}),e.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(b,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>l("title",s.target.value),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base ${r.title?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`,placeholder:"Enter comic title"}),r.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Series Name *"}),e.jsx("input",{type:"text",list:"series-list",value:t.seriesName,onChange:s=>l("seriesName",s.target.value),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base ${r.seriesName?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`,placeholder:"Enter series name"}),e.jsx("datalist",{id:"series-list",children:h.map(s=>e.jsx("option",{value:s},s))}),r.seriesName&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.seriesName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Issue Number *"}),e.jsx("input",{type:"number",min:"0",value:t.issueNumber,onChange:s=>l("issueNumber",parseInt(s.target.value)||0),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base ${r.issueNumber?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`}),r.issueNumber&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.issueNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Release Date *"}),e.jsx("input",{type:"date",value:t.releaseDate,onChange:s=>l("releaseDate",s.target.value),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base ${r.releaseDate?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`}),r.releaseDate&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.releaseDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Cover Image URL"}),e.jsxs("div",{className:"flex space-x-2 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"url",value:t.coverImageUrl,onChange:s=>l("coverImageUrl",s.target.value),className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"https://example.com/cover.jpg"})}),t.coverImageUrl&&e.jsx("div",{className:"w-12 h-12 border border-gray-600 rounded overflow-hidden bg-gray-700",children:e.jsx("img",{src:t.coverImageUrl,alt:"Preview",className:"w-full h-full object-cover",onError:s=>{s.target.style.display="none"}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Grade *"}),e.jsx("select",{value:t.grade,onChange:s=>l("grade",parseFloat(s.target.value)),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base ${r.grade?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`,children:k.map(s=>e.jsx("option",{value:s,children:s},s))}),r.grade&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.grade})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Purchase Price (USD)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:t.purchasePrice||"",onChange:s=>l("purchasePrice",s.target.value?parseFloat(s.target.value):void 0),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base ${r.purchasePrice?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`,placeholder:"Enter purchase price"}),r.purchasePrice&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.purchasePrice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Current Value (USD)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:t.currentValue||"",onChange:s=>l("currentValue",s.target.value?parseFloat(s.target.value):void 0),className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base",placeholder:"Enter current market value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Purchase Date *"}),e.jsx("input",{type:"date",value:t.purchaseDate,onChange:s=>l("purchaseDate",s.target.value),className:`w-full border rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white text-sm sm:text-base ${r.purchaseDate?"border-red-400 bg-gray-700":"border-gray-600 bg-gray-700"}`}),r.purchaseDate&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:r.purchaseDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Signed By"}),e.jsx("input",{type:"text",value:t.signedBy,onChange:s=>l("signedBy",s.target.value),className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter signer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Virtual Box"}),e.jsx("input",{type:"text",list:"virtualbox-list",value:t.storageLocation,onChange:s=>l("storageLocation",s.target.value),className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Box 1, Shelf A, etc."}),e.jsx("datalist",{id:"virtualbox-list",children:y.map(s=>e.jsx("option",{value:s},s))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isSlabbed,onChange:s=>l("isSlabbed",s.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-400 w-4 h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-300",children:"Slabbed"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isVariant,onChange:s=>l("isVariant",s.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-400 w-4 h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-300",children:"Variant Cover"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isGraphicNovel,onChange:s=>l("isGraphicNovel",s.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-400 w-4 h-4"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-300",children:"Graphic Novel"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Tags"}),e.jsxs("div",{className:"flex space-x-2 mb-2 items-stretch",children:[e.jsx("input",{type:"text",value:d,onChange:s=>u(s.target.value),onKeyDown:N,className:"flex-1 border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Add a tag"}),e.jsx("button",{type:"button",onClick:g,className:"px-3 sm:px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm sm:text-base",children:"Add"})]}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:t.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-blue-500/20 text-blue-300 text-xs sm:text-sm rounded border border-blue-500/30",children:[e.jsx("span",{children:s}),e.jsx("button",{type:"button",onClick:()=>f(s),className:"text-blue-300 hover:text-blue-100",children:e.jsx(b,{size:12,className:"sm:w-3.5 sm:h-3.5"})})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Cover Artist"}),e.jsx("input",{type:"text",value:t.coverArtist,onChange:s=>l("coverArtist",s.target.value),className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base",placeholder:"Enter cover artist name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:t.notes,onChange:s=>l("notes",s.target.value),rows:4,className:"w-full border border-gray-600 bg-gray-700 rounded-lg px-2 sm:px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm sm:text-base resize-none",placeholder:"Additional notes about this comic"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 sm:px-6 py-2 border border-gray-600 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex items-center justify-center space-x-2 px-4 sm:px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors shadow-lg text-sm sm:text-base",children:[e.jsx(w,{size:16}),e.jsxs("span",{children:[a?"Update":"Save"," Comic"]})]})]})]})]})})};export{P as ComicForm};
