import{j as s,D as C}from"./components-DyEqrbuX.js";import{r as o,i as D,G as k,L as R,B as $,S as d}from"./icons-BrV6DUKz.js";import"./react-vendor-DavUf6mE.js";const I=({rawComics:t,onBack:y,onView:u,onViewSeries:h})=>{const[x,m]=o.useState("grid"),[g,f]=o.useState("series");o.useEffect(()=>{window.scrollTo(0,0)},[]);const i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),w=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n=t.filter(e=>e.currentValue!==void 0),p=t.reduce((e,r)=>e+r.purchasePrice,0),j=n.reduce((e,r)=>e+(r.currentValue||0),0),N=j-n.reduce((e,r)=>e+r.purchasePrice,0),V=n.reduce((e,r)=>{const a=(r.currentValue||0)-r.purchasePrice,l=e?(e.currentValue||0)-e.purchasePrice:-1/0;return a>l?r:e},null),P=n.reduce((e,r)=>{const a=(r.currentValue||0)-r.purchasePrice,l=e?(e.currentValue||0)-e.purchasePrice:1/0;return a<l?r:e},null),S={totalComics:t.length,totalValue:p,totalPurchaseValue:p,totalCurrentValue:j,highestValuedComic:t.reduce((e,r)=>{const a=r.currentValue||r.purchasePrice,l=e?e.currentValue||e.purchasePrice:0;return a>l?r:e},null),highestValuedSlabbedComic:null,highestValuedRawComic:t.reduce((e,r)=>{const a=r.currentValue||r.purchasePrice,l=e?e.currentValue||e.purchasePrice:0;return a>l?r:e},null),biggestGainer:V,biggestLoser:P,rawComics:t.length,slabbedComics:0,signedComics:t.filter(e=>e.signedBy.trim()!=="").length,averageGrade:t.length>0?t.reduce((e,r)=>e+r.grade,0)/t.length:0,totalGainLoss:N,totalGainLossPercentage:n.length>0&&n.reduce((e,r)=>e+r.purchasePrice,0)>0?N/n.reduce((e,r)=>e+r.purchasePrice,0)*100:0,comicsWithCurrentValue:n.length},c=Array.from(new Set(t.map(e=>e.seriesName))).sort(),b=[...t].sort((e,r)=>{switch(g){case"series":{const a=e.seriesName.localeCompare(r.seriesName);return a!==0?a:e.issueNumber-r.issueNumber}case"issue":return e.issueNumber-r.issueNumber;case"grade":return r.grade-e.grade;case"value":{const a=e.currentValue||e.purchasePrice;return(r.currentValue||r.purchasePrice)-a}case"date":return new Date(r.releaseDate).getTime()-new Date(e.releaseDate).getTime();default:return e.seriesName.localeCompare(r.seriesName)}});return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsx("div",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("button",{onClick:y,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[s.jsx(D,{size:20}),s.jsx("span",{children:"Back to Collection"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 border border-gray-600 rounded-lg",children:[s.jsx("button",{onClick:()=>m("grid"),className:`p-2 rounded-l-lg transition-colors ${x==="grid"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:s.jsx(k,{size:16})}),s.jsx("button",{onClick:()=>m("list"),className:`p-2 rounded-r-lg transition-colors ${x==="list"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:s.jsx(R,{size:16})})]}),s.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"series",children:"Sort by Series"}),s.jsx("option",{value:"issue",children:"Sort by Issue #"}),s.jsx("option",{value:"grade",children:"Sort by Grade"}),s.jsx("option",{value:"value",children:"Sort by Value"}),s.jsx("option",{value:"date",children:"Sort by Release Date"})]})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-indigo-500 rounded-lg",children:s.jsx($,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Raw Comics"}),s.jsxs("p",{className:"text-gray-300",children:[t.length," raw comic",t.length!==1?"s":""," in collection",c.length>0&&s.jsxs("span",{className:"text-gray-400 ml-2",children:["• ",c.length," series"]})]})]})]})}),s.jsx(C,{stats:S,showDetailed:!0,onViewComic:u,hideRawCard:!0}),c.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Raw Comics by Series"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:c.slice(0,8).map(e=>{const r=t.filter(l=>l.seriesName===e).length,a=t.filter(l=>l.seriesName===e).reduce((l,v)=>l+(v.currentValue||v.purchasePrice),0);return s.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-3 border border-gray-600 cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>h&&h(e),children:[s.jsx("p",{className:"font-medium text-white text-sm truncate",children:e}),s.jsxs("p",{className:"text-xs text-gray-400",children:[r," issue",r!==1?"s":""]}),s.jsx("p",{className:"text-xs text-green-400",children:i(a)})]},e)})})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Raw Comics Collection"}),x==="grid"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:b.map(e=>s.jsxs("div",{className:"bg-gray-700/50 rounded-lg border border-gray-600 overflow-hidden hover:border-blue-500 transition-all cursor-pointer group",onClick:()=>u(e),children:[s.jsxs("div",{className:"relative aspect-[2/3] bg-gray-600",children:[e.coverImageUrl?s.jsx("img",{src:e.coverImageUrl,alt:`${e.seriesName} #${e.issueNumber}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(d,{size:32,className:"text-gray-500"})}),s.jsxs("div",{className:"absolute top-1 left-1 flex flex-col space-y-1",children:[s.jsx("span",{className:"px-1 py-0.5 bg-indigo-500 text-white text-xs font-medium rounded",children:"Raw"}),e.signedBy&&s.jsx("span",{className:"px-1 py-0.5 bg-rose-500 text-white text-xs font-medium rounded",children:"Signed"})]})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("p",{className:"font-medium text-white text-sm truncate mb-1",children:e.seriesName}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("p",{className:"text-xs text-gray-400",children:["#",e.issueNumber]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(d,{size:10,className:"text-amber-400"}),s.jsx("span",{className:"text-xs text-white",children:e.grade})]})]}),s.jsx("p",{className:"text-xs text-gray-400 mb-1",children:new Date(e.releaseDate).getFullYear()}),s.jsx("p",{className:"text-xs font-semibold text-green-400",children:i(e.currentValue||e.purchasePrice)})]})]},e.id))}):s.jsx("div",{className:"space-y-2",children:b.map(e=>s.jsx("div",{className:"bg-gray-700/50 rounded-lg border border-gray-600 p-4 hover:border-blue-500 transition-all cursor-pointer group",onClick:()=>u(e),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-16 bg-gray-600 rounded overflow-hidden flex-shrink-0",children:e.coverImageUrl?s.jsx("img",{src:e.coverImageUrl,alt:`${e.seriesName} #${e.issueNumber}`,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(d,{size:16,className:"text-gray-500"})})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("h4",{className:"font-bold text-white",children:[e.seriesName," #",e.issueNumber]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(d,{size:12,className:"text-amber-400"}),s.jsx("span",{className:"text-sm text-white",children:e.grade})]}),s.jsx("span",{className:"px-2 py-0.5 bg-indigo-500/20 text-indigo-300 text-xs rounded border border-indigo-500/30",children:"Raw"}),e.signedBy&&s.jsx("span",{className:"px-2 py-0.5 bg-rose-500/20 text-rose-300 text-xs rounded border border-rose-500/30",children:"Signed"})]}),s.jsx("p",{className:"text-sm text-gray-300",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-400",children:[w(e.releaseDate),e.coverArtist&&` • ${e.coverArtist}`]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-white",children:i(e.currentValue||e.purchasePrice)}),e.currentValue&&e.currentValue!==e.purchasePrice&&s.jsxs("p",{className:`text-xs ${e.currentValue>e.purchasePrice?"text-emerald-400":"text-red-400"}`,children:[e.currentValue>e.purchasePrice?"+":"",i(e.currentValue-e.purchasePrice),e.purchasePrice>0&&` (${((e.currentValue-e.purchasePrice)/e.purchasePrice*100).toFixed(1)}%)`]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:r=>r.stopPropagation()})]})]})},e.id))})]})]})})]})};export{I as RawComicsDetail};
