const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ComicForm-CtHY1ciT.js","assets/components-DbX9iens.js","assets/icons-BH5OHx2U.js","assets/react-vendor-DavUf6mE.js","assets/ComicDetail-Bmyry_VS.js","assets/SeriesDetail-BTQ0WfH6.js","assets/StorageLocationDetail-BmyCEZa4.js","assets/CoverArtistDetail-ByIt1WwM.js","assets/TagDetail-Dj2wX1BW.js","assets/RawComicsDetail-CJdo98As.js","assets/SlabbedComicsDetail-CWqhQE09.js","assets/StorageLocationsListing-DfGKHWGX.js","assets/VariantsDetail-CG6-NH0n.js","assets/CsvConverter-CjmEn3bm.js"])))=>i.map(i=>d[i]);
import{j as e,D as de,C as we,a as ye}from"./components-DbX9iens.js";import{R as b,r as T,C as je,c as Ce,B as ae,d as Ne,F as Ve,G as Le,L as ke,e as Te,f as De,g as Pe,h as Se}from"./icons-BH5OHx2U.js";import{a as _e}from"./react-vendor-DavUf6mE.js";import{i as Re}from"./data-hBCSNks3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const x of n.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();var ee={},me;function Ee(){if(me)return ee;me=1;var s=_e();return ee.createRoot=s.createRoot,ee.hydrateRoot=s.hydrateRoot,ee}var Fe=Ee();const Ue="modulepreload",Ae=function(s){return"/"+s},he={},z=function(o,t,l){let a=Promise.resolve();if(t&&t.length>0){let D=function(p){return Promise.all(p.map(i=>Promise.resolve(i).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),g=x?.nonce||x?.getAttribute("nonce");a=D(t.map(p=>{if(p=Ae(p),p in he)return;he[p]=!0;const i=p.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${c}`))return;const f=document.createElement("link");if(f.rel=i?"stylesheet":Ue,i||(f.as="script"),f.crossOrigin="",f.href=p,g&&f.setAttribute("nonce",g),document.head.appendChild(f),i)return new Promise((w,y)=>{f.addEventListener("load",w),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${p}`)))})}))}function n(x){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=x,window.dispatchEvent(g),!g.defaultPrevented)throw x}return a.then(x=>{for(const g of x||[])g.status==="rejected"&&n(g.reason);return o().catch(n)})},xe=s=>{let o;const t=new Set,l=(p,i)=>{const c=typeof p=="function"?p(o):p;if(!Object.is(c,o)){const f=o;o=i??(typeof c!="object"||c===null)?c:Object.assign({},o,c),t.forEach(w=>w(o,f))}},a=()=>o,g={setState:l,getState:a,getInitialState:()=>D,subscribe:p=>(t.add(p),()=>t.delete(p))},D=o=s(l,a,g);return g},Ie=s=>s?xe(s):xe,Be=s=>s;function Oe(s,o=Be){const t=b.useSyncExternalStore(s.subscribe,b.useCallback(()=>o(s.getState()),[s,o]),b.useCallback(()=>o(s.getInitialState()),[s,o]));return b.useDebugValue(t),t}const ge=s=>{const o=Ie(s),t=l=>Oe(o,l);return Object.assign(t,o),t},ze=s=>s?ge(s):ge,se=(s,o,t,l)=>{let a=[...s];if(o.searchTerm){const n=o.searchTerm.toLowerCase();a=a.filter(x=>x.title.toLowerCase().includes(n)||x.seriesName.toLowerCase().includes(n)||x.notes.toLowerCase().includes(n)||x.signedBy.toLowerCase().includes(n)||x.coverArtist.toLowerCase().includes(n))}return o.seriesName&&(a=a.filter(n=>n.seriesName.toLowerCase().includes(o.seriesName.toLowerCase()))),a=a.filter(n=>n.grade>=o.minGrade&&n.grade<=o.maxGrade),a=a.filter(n=>n.purchasePrice>=o.minPrice&&n.purchasePrice<=o.maxPrice),o.isSlabbed!==null&&(a=a.filter(n=>n.isSlabbed===o.isSlabbed)),o.isSigned!==null&&(a=a.filter(n=>o.isSigned?n.signedBy.trim()!=="":n.signedBy.trim()==="")),o.tags.length>0&&(a=a.filter(n=>o.tags.some(x=>n.tags.includes(x)))),a.sort((n,x)=>{let g=n[t],D=x[t];return t==="issueNumber"?(g=parseFloat(g)||0,D=parseFloat(D)||0):t==="releaseDate"||t==="purchaseDate"?(g=new Date(g).getTime(),D=new Date(D).getTime()):typeof g=="string"&&(g=g.toLowerCase(),D=D.toLowerCase()),g<D?l==="asc"?-1:1:g>D?l==="asc"?1:-1:0}),a},$e={searchTerm:"",seriesName:"",minGrade:.5,maxGrade:10,minPrice:0,maxPrice:1e4,isSlabbed:null,isSigned:null,tags:[]},fe=ze((s,o)=>({comics:[],filteredComics:[],filters:$e,sortField:"releaseDate",sortDirection:"desc",loading:!0,showForm:!1,editingComic:void 0,activeTab:"collection",selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,viewMode:"grid",showVirtualBoxes:!1,showCsvConverter:!1,setComics:t=>s(l=>{const a=se(t,l.filters,l.sortField,l.sortDirection);return{comics:t,filteredComics:a}}),setFilteredComics:t=>s({filteredComics:t}),setFilters:t=>s(l=>{const a={...l.filters,...t},n=se(l.comics,a,l.sortField,l.sortDirection);return{filters:a,filteredComics:n}}),setSortField:t=>s(l=>{const a=se(l.comics,l.filters,t,l.sortDirection);return{sortField:t,filteredComics:a}}),setSortDirection:t=>s(l=>{const a=se(l.comics,l.filters,l.sortField,t);return{sortDirection:t,filteredComics:a}}),setLoading:t=>s({loading:t}),setShowForm:t=>s({showForm:t}),setEditingComic:t=>s({editingComic:t}),setActiveTab:t=>s({activeTab:t}),setSelectedComic:t=>s({selectedComic:t}),setSelectedSeries:t=>s({selectedSeries:t}),setSelectedStorageLocation:t=>s({selectedStorageLocation:t}),setSelectedCoverArtist:t=>s({selectedCoverArtist:t}),setSelectedTag:t=>s({selectedTag:t}),setSelectedCondition:t=>s({selectedCondition:t}),setViewMode:t=>s({viewMode:t}),setShowVirtualBoxes:t=>s({showVirtualBoxes:t}),setShowCsvConverter:t=>s({showCsvConverter:t}),addComic:t=>{const l={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(a=>({comics:[...a.comics,l],showForm:!1,editingComic:void 0}))},updateComic:(t,l)=>{s(a=>({comics:a.comics.map(n=>n.id===t?{...n,...l,updatedAt:new Date().toISOString()}:n),showForm:!1,editingComic:void 0}))},deleteComic:t=>{s(l=>({comics:l.comics.filter(a=>a.id!==t)}))},navigateToComic:t=>s({selectedComic:t,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToSeries:t=>s({selectedSeries:t,selectedComic:void 0,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToStorageLocation:t=>s({selectedStorageLocation:t,selectedComic:void 0,selectedSeries:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCoverArtist:t=>s({selectedCoverArtist:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToTag:t=>s({selectedTag:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCondition:t=>s({selectedCondition:t,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToVirtualBoxes:()=>s({showVirtualBoxes:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showCsvConverter:!1}),navigateToCsvConverter:()=>s({showCsvConverter:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1}),backToCollection:()=>s({selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1,showForm:!1,editingComic:void 0}),get stats(){const t=o(),l=t.comics.filter(i=>i.currentValue!==void 0),a=t.comics.reduce((i,c)=>i+(c.purchasePrice||0),0),n=l.reduce((i,c)=>i+(c.currentValue||0),0),x=n-l.reduce((i,c)=>i+(c.purchasePrice||0),0),g=l.length>0?x/l.reduce((i,c)=>i+(c.purchasePrice||0),0)*100:0,D=l.reduce((i,c)=>{const f=(c.currentValue||0)-(c.purchasePrice||0),w=i?(i.currentValue||0)-(i.purchasePrice||0):-1/0;return f>w?c:i},null),p=l.reduce((i,c)=>{const f=(c.currentValue||0)-(c.purchasePrice||0),w=i?(i.currentValue||0)-(i.purchasePrice||0):1/0;return f<w?c:i},null);return{totalComics:t.comics.length,totalValue:a,totalPurchaseValue:a,totalCurrentValue:n,highestValuedComic:t.comics.reduce((i,c)=>!i||c.purchasePrice>i.purchasePrice?c:i,null),highestValuedSlabbedComic:t.comics.filter(i=>i.isSlabbed).reduce((i,c)=>{const f=c.currentValue||c.purchasePrice,w=i?i.currentValue||i.purchasePrice:0;return f>w?c:i},null),highestValuedRawComic:t.comics.filter(i=>!i.isSlabbed).reduce((i,c)=>{const f=c.currentValue||c.purchasePrice,w=i?i.currentValue||i.purchasePrice:0;return f>w?c:i},null),biggestGainer:D,biggestLoser:p,rawComics:t.comics.filter(i=>!i.isSlabbed).length,slabbedComics:t.comics.filter(i=>i.isSlabbed).length,signedComics:t.comics.filter(i=>i.signedBy.trim()!=="").length,averageGrade:t.comics.length>0?t.comics.reduce((i,c)=>i+c.grade,0)/t.comics.length:0,totalGainLoss:x,totalGainLossPercentage:g,comicsWithCurrentValue:l.length}},get allSeries(){return Array.from(new Set(o().comics.map(t=>t.seriesName))).sort()},get allVirtualBoxes(){return Array.from(new Set(o().comics.map(t=>t.storageLocation).filter(Boolean))).sort()},get variantsCount(){return o().comics.filter(t=>t.isVariant).length}})),Me=()=>{const s=fe.getState();if(s.comics.length===0)try{s.setComics(Re),s.setLoading(!1)}catch(o){console.error("Error loading comics:",o),s.setComics([]),s.setLoading(!1)}},Ge=()=>{const s=window.location.hash.slice(1),[o,t]=s.split("?"),l={};if(t){const a=new URLSearchParams(t);a.has("tab")&&(l.tab=a.get("tab")),a.has("view")&&(l.viewMode=a.get("view")),a.has("search")&&(l.searchTerm=a.get("search")||void 0),a.has("sort")&&(l.sortField=a.get("sort")||void 0),a.has("order")&&(l.sortDirection=a.get("order"))}return{route:o||"/",params:l}},We=s=>{const o=s.split("/").filter(Boolean),t={};if(o.length===0)return{type:"home",params:t};const[l,...a]=o;switch(l){case"comic":a.length>0&&(t.comicId=decodeURIComponent(a[0]));break;case"series":a.length>0&&(t.seriesName=decodeURIComponent(a[0]));break;case"storage":a.length>0&&(t.storageLocation=decodeURIComponent(a[0]));break;case"artist":a.length>0&&(t.coverArtist=decodeURIComponent(a[0]));break;case"tag":a.length>0&&(t.tag=decodeURIComponent(a[0]));break;case"raw":t.condition="raw";break;case"slabbed":t.condition="slabbed";break;case"variants":t.condition="variants";break;case"boxes":break;case"csv":break;case"collection":case"stats":t.tab=l;break}return{type:l,params:t}},qe=(s,o=!1)=>{o?window.history.replaceState(null,"",s):window.history.pushState(null,"",s),window.dispatchEvent(new CustomEvent("urlchange",{detail:{url:s}}))},Ke=async s=>{try{return await navigator.clipboard.writeText(s),!0}catch(o){return console.error("Failed to copy URL to clipboard:",o),!1}},Ye=()=>window.location.href,He=({activeTab:s,selectedComic:o,selectedSeries:t,selectedStorageLocation:l,selectedCoverArtist:a,selectedTag:n,selectedCondition:x,showVirtualBoxes:g,showCsvConverter:D,viewMode:p,searchTerm:i,sortField:c,sortDirection:f,setActiveTab:w,setSelectedComic:y,setSelectedSeries:P,setSelectedStorageLocation:j,setSelectedCoverArtist:C,setSelectedTag:k,setSelectedCondition:u,setShowVirtualBoxes:N,setShowCsvConverter:V,setViewMode:R,setFilters:W,setSortField:E,setSortDirection:q,allComics:F})=>{const Y=T.useCallback((B,m,L,v=!1)=>{y(void 0),P(null),j(null),C(null),k(null),u(null),N(!1),V(!1);let h="";switch(B){case"home":h="/";break;case"collection":h="/collection";break;case"stats":h="/stats";break;case"comic":h=`/comic/${encodeURIComponent(m||"")}`;break;case"series":h=`/series/${encodeURIComponent(m||"")}`;break;case"storage":h=`/storage/${encodeURIComponent(m||"")}`;break;case"artist":h=`/artist/${encodeURIComponent(m||"")}`;break;case"tag":h=`/tag/${encodeURIComponent(m||"")}`;break;case"raw":h="/raw";break;case"slabbed":h="/slabbed";break;case"variants":h="/variants";break;case"boxes":h="/boxes";break;case"csv":h="/csv";break;default:h="/"}const I=new URLSearchParams;L?.tab&&I.set("tab",L.tab),L?.viewMode&&I.set("view",L.viewMode),L?.searchTerm&&I.set("search",L.searchTerm),L?.sortField&&I.set("sort",L.sortField),L?.sortDirection&&I.set("order",L.sortDirection);const H=I.toString(),U=h+(H?`?${H}`:"");qe(`#${U}`,v)},[y,P,j,C,k,u,N,V]),_=T.useCallback(()=>{const{route:B,params:m}=Ge(),{type:L,params:v}=We(B);switch(m.tab&&m.tab!==s&&w(m.tab),m.viewMode&&m.viewMode!==p&&R(m.viewMode),m.searchTerm!==void 0&&m.searchTerm!==i&&W({searchTerm:m.searchTerm}),m.sortField&&m.sortField!==c&&E(m.sortField),m.sortDirection&&m.sortDirection!==f&&q(m.sortDirection),L){case"home":case"collection":y(void 0),P(null),j(null),C(null),k(null),u(null),N(!1),V(!1);break;case"stats":w("stats"),y(void 0),P(null),j(null),C(null),k(null),u(null),N(!1),V(!1);break;case"comic":if(v.comicId){const h=F.find(I=>I.id===v.comicId);h&&(y(h),P(null),j(null),C(null),k(null),u(null),N(!1),V(!1))}break;case"series":v.seriesName&&(P(v.seriesName),y(void 0),j(null),C(null),k(null),u(null),N(!1),V(!1));break;case"storage":v.storageLocation&&(j(v.storageLocation),y(void 0),P(null),C(null),k(null),u(null),N(!1),V(!1));break;case"artist":v.coverArtist&&(C(v.coverArtist),y(void 0),P(null),j(null),k(null),u(null),N(!1),V(!1));break;case"tag":v.tag&&(k(v.tag),y(void 0),P(null),j(null),C(null),u(null),N(!1),V(!1));break;case"raw":u("raw"),y(void 0),P(null),j(null),C(null),k(null),N(!1),V(!1);break;case"slabbed":u("slabbed"),y(void 0),P(null),j(null),C(null),k(null),N(!1),V(!1);break;case"variants":u("variants"),y(void 0),P(null),j(null),C(null),k(null),N(!1),V(!1);break;case"boxes":N(!0),y(void 0),P(null),j(null),C(null),k(null),u(null),V(!1);break;case"csv":V(!0),y(void 0),P(null),j(null),C(null),k(null),u(null),N(!1);break}},[s,p,i,c,f,F,w,R,W,E,q,y,P,j,C,k,u,N,V]);return T.useEffect(()=>{_();const B=()=>{_()},m=()=>{_()};return window.addEventListener("popstate",B),window.addEventListener("urlchange",m),()=>{window.removeEventListener("popstate",B),window.removeEventListener("urlchange",m)}},[_]),{navigateToRoute:Y}},Je=({className:s="",title:o="Share URL",size:t=16})=>{const[l,a]=T.useState(!1),n=async()=>{const x=Ye();await Ke(x)&&(a(!0),setTimeout(()=>a(!1),2e3))};return e.jsx("button",{onClick:n,className:`p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors ${s}`,title:o,children:l?e.jsx(je,{size:t,className:"text-green-400"}):e.jsx(Ce,{size:t})})},Qe=b.lazy(()=>z(()=>import("./ComicForm-CtHY1ciT.js"),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.ComicForm}))),Xe=b.lazy(()=>z(()=>import("./ComicDetail-Bmyry_VS.js"),__vite__mapDeps([4,1,2,3])).then(s=>({default:s.ComicDetail}))),Ze=b.lazy(()=>z(()=>import("./SeriesDetail-BTQ0WfH6.js"),__vite__mapDeps([5,1,2,3])).then(s=>({default:s.SeriesDetail}))),es=b.lazy(()=>z(()=>import("./StorageLocationDetail-BmyCEZa4.js"),__vite__mapDeps([6,1,2,3])).then(s=>({default:s.StorageLocationDetail}))),ss=b.lazy(()=>z(()=>import("./CoverArtistDetail-ByIt1WwM.js"),__vite__mapDeps([7,1,2,3])).then(s=>({default:s.CoverArtistDetail}))),ts=b.lazy(()=>z(()=>import("./TagDetail-Dj2wX1BW.js"),__vite__mapDeps([8,1,2,3])).then(s=>({default:s.TagDetail}))),rs=b.lazy(()=>z(()=>import("./RawComicsDetail-CJdo98As.js"),__vite__mapDeps([9,1,2,3])).then(s=>({default:s.RawComicsDetail}))),as=b.lazy(()=>z(()=>import("./SlabbedComicsDetail-CWqhQE09.js"),__vite__mapDeps([10,1,2,3])).then(s=>({default:s.SlabbedComicsDetail}))),ls=b.lazy(()=>z(()=>import("./StorageLocationsListing-DfGKHWGX.js"),__vite__mapDeps([11,1,2,3])).then(s=>({default:s.StorageLocationsListing}))),ns=b.lazy(()=>z(()=>import("./VariantsDetail-CG6-NH0n.js"),__vite__mapDeps([12,1,2,3])).then(s=>({default:s.VariantsDetail}))),is=b.lazy(()=>z(()=>import("./CsvConverter-CjmEn3bm.js"),__vite__mapDeps([13,1,2,3])).then(s=>({default:s.CsvConverter}))),O=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading..."})]})});function os(){const{comics:s,filteredComics:o,stats:t,filters:l,sortField:a,sortDirection:n,loading:x,addComic:g,updateComic:D,setFilters:p,setSortField:i,setSortDirection:c,allSeries:f,allVirtualBoxes:w,variantsCount:y}=fe();T.useEffect(()=>{Me()},[]);const[P,j]=T.useState(!1),[C,k]=T.useState(void 0),[u,N]=T.useState("collection"),[V,R]=T.useState(void 0),[W,E]=T.useState(null),[q,F]=T.useState(null),[Y,_]=T.useState(null),[B,m]=T.useState(null),[L,v]=T.useState(null),[h,I]=T.useState("grid"),[H,U]=T.useState(!1),[le,J]=T.useState(!1),{navigateToRoute:S}=He({activeTab:u,selectedComic:V,selectedSeries:W,selectedStorageLocation:q,selectedCoverArtist:Y,selectedTag:B,selectedCondition:L,showVirtualBoxes:H,showCsvConverter:le,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n,setActiveTab:N,setSelectedComic:R,setSelectedSeries:E,setSelectedStorageLocation:F,setSelectedCoverArtist:_,setSelectedTag:m,setSelectedCondition:v,setShowVirtualBoxes:U,setShowCsvConverter:J,setViewMode:I,setFilters:p,setSortField:i,setSortDirection:c,allComics:s}),be=r=>{C?D(C.id,r):g(r),j(!1),k(void 0)},A=r=>{R(r),E(null),F(null),_(null),m(null),v(null),U(!1),S("comic",r.id,{tab:u})},$=()=>{R(void 0),E(null),F(null),_(null),m(null),v(null),U(!1),J(!1),S("collection",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},M=r=>{E(r),R(void 0),F(null),_(null),m(null),v(null),U(!1),S("series",r,{tab:u})},te=r=>{F(r),R(void 0),E(null),_(null),m(null),v(null),U(!1),S("storage",r,{tab:u})},pe=r=>{_(r),R(void 0),E(null),F(null),m(null),v(null),U(!1),S("artist",r,{tab:u})},ne=r=>{m(r),R(void 0),E(null),F(null),_(null),v(null),U(!1),S("tag",r,{tab:u})},Q=()=>{v("raw"),R(void 0),E(null),F(null),_(null),m(null),U(!1),S("raw",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},X=()=>{v("slabbed"),R(void 0),E(null),F(null),_(null),m(null),U(!1),S("slabbed",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},ie=()=>{v("variants"),R(void 0),E(null),F(null),_(null),m(null),U(!1),S("variants",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},oe=()=>{U(!0),R(void 0),E(null),F(null),_(null),m(null),v(null),J(!1),S("boxes",void 0,{tab:u})};if(x)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading your collection..."})]})});if(le)return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(is,{onBack:$})});if(H)return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ls,{allComics:s,onBack:$,onViewStorageLocation:te})});if(V)return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Xe,{comic:V,allComics:s,onBack:$,onView:A,onViewSeries:M,onViewStorageLocation:te,onViewCoverArtist:pe,onViewTag:ne,onViewRawComics:Q,onViewSlabbedComics:X})});if(W){const r=s.filter(d=>d.seriesName===W);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Ze,{seriesName:W||"",seriesComics:r,onBack:$,onView:A})})}if(q){const r=s.filter(d=>d.storageLocation===q);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(es,{storageLocation:q||"",locationComics:r,onBack:$,onView:A,onViewSeries:M})})}if(Y){const r=s.filter(d=>d.coverArtist===Y);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ss,{coverArtist:Y||"",artistComics:r,onBack:$,onView:A,onViewSeries:M})})}if(B){const r=s.filter(d=>d.tags.includes(B||""));return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ts,{tag:B||"",tagComics:r,onBack:$,onView:A,onViewSeries:M,onViewTag:ne})})}if(L==="raw"){const r=s.filter(d=>!d.isSlabbed);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(rs,{rawComics:r,onBack:$,onView:A,onViewSeries:M})})}if(L==="slabbed"){const r=s.filter(d=>d.isSlabbed);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(as,{slabbedComics:r,onBack:$,onView:A,onViewSeries:M})})}if(L==="variants"){const r=s.filter(d=>d.isVariant);return e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ns,{variantComics:r,onBack:$,onView:A,onViewRawComics:Q,onViewSlabbedComics:X,onViewSeries:M})})}return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-lg",children:e.jsx(ae,{size:24,className:"text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"comics.banast.as"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:[t.totalComics," comics"]})]})]}),u==="collection"&&e.jsx("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-1 max-w-2xl mx-4",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ne,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search comics...",value:l.searchTerm,onChange:r=>{p({...l,searchTerm:r.target.value}),S(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:h,searchTerm:r.target.value,sortField:a,sortDirection:n})},className:"w-full pl-9 pr-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm"})]})}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsx(Je,{title:"Copy URL to clipboard"}),u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>J(!0),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"CSV Converter",children:e.jsx(Ve,{size:16})}),e.jsxs("div",{className:"flex items-center space-x-2 border border-gray-600 rounded-lg",children:[e.jsx("button",{onClick:()=>{I("grid"),S(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"grid",searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`p-2 rounded-l-lg transition-colors ${h==="grid"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(Le,{size:16})}),e.jsx("button",{onClick:()=>{I("list"),S(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"list",searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`p-2 rounded-r-lg transition-colors ${h==="list"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(ke,{size:16})})]}),e.jsxs("select",{value:a,onChange:r=>{i(r.target.value),S(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:r.target.value,sortDirection:n})},className:"bg-gray-700 border border-gray-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm text-white",children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"seriesName",children:"Sort by Series"}),e.jsx("option",{value:"issueNumber",children:"Sort by Issue #"}),e.jsx("option",{value:"releaseDate",children:"Sort by Release Date"}),e.jsx("option",{value:"grade",children:"Sort by Grade"}),e.jsx("option",{value:"purchasePrice",children:"Sort by Purchase Price"}),e.jsx("option",{value:"currentValue",children:"Sort by Current Value"}),e.jsx("option",{value:"purchaseDate",children:"Sort by Purchase Date"})]}),e.jsx("button",{onClick:()=>{const r=n==="asc"?"desc":"asc";c(r),S(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:r})},className:"p-1.5 sm:p-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors text-gray-300",children:n==="asc"?e.jsx(Te,{size:14,className:"sm:w-4 sm:h-4"}):e.jsx(De,{size:14,className:"sm:w-4 sm:h-4"})})]})]})]})})}),e.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>{N("collection"),S("collection",void 0,{tab:"collection",viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="collection"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Collection"})]})}),e.jsx("button",{onClick:()=>{N("stats"),S("stats",void 0,{tab:"stats",viewMode:h,searchTerm:l.searchTerm,sortField:a,sortDirection:n})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="stats"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(Pe,{size:16}),e.jsx("span",{children:"Statistics"})]})})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:[u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 sm:pt-6 lg:pt-8",children:e.jsx(de,{stats:t,onViewComic:A,onViewRawComics:Q,onViewSlabbedComics:X,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:w.length,variantsCount:y})}),o.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(ae,{size:48,className:"mx-auto text-gray-500 mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-white mb-2",children:s.length===0?"No comics in your collection":"No comics match your filters"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-400 mb-4 sm:mb-6 px-4",children:s.length===0?"Start building your collection by adding your first comic!":"Try adjusting your search criteria or filters."}),s.length===0&&e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors mx-auto shadow-lg",children:[e.jsx(Se,{size:20}),e.jsx("span",{children:"Add Your First Comic"})]})]}):e.jsx(e.Fragment,{children:h==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:o.map(r=>e.jsx(we,{comic:r,onView:A},r.id))}):e.jsx(ye,{comics:o,onView:A})})]}),u==="stats"&&e.jsxs("div",{className:"space-y-8 pt-4 sm:pt-6 lg:pt-8",children:[e.jsx(de,{stats:t,showDetailed:u==="stats",onViewComic:A,onViewRawComics:Q,onViewSlabbedComics:X,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:w.length,variantsCount:y,hideSlabbedCard:L==="slabbed",hideRawCard:L==="raw"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.comicsWithCurrentValue>0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Series Performance"}),f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(r=>{const d=s.filter(K=>K.seriesName===r),G=d.filter(K=>K.currentValue!==void 0),Z=G.reduce((K,re)=>K+(re.purchasePrice||0),0),ce=G.reduce((K,re)=>K+(re.currentValue||0),0),ue=ce-Z,ve=Z>0?ue/Z*100:0;return{name:r,count:d.length,countWithValue:G.length,purchaseValue:Z,currentValue:ce,gainLoss:ue,gainLossPercentage:ve}}).filter(r=>r.countWithValue>0).sort((r,d)=>Math.abs(d.gainLossPercentage)-Math.abs(r.gainLossPercentage)).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>M(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.countWithValue," of ",r.count," comics valued"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),e.jsxs("p",{className:`text-sm font-medium ${r.gainLoss>=0?"text-emerald-400":"text-red-400"}`,children:[r.gainLoss>=0?"+":"",(r.gainLoss||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})," (",(r.gainLossPercentage||0)>=0?"+":"",(r.gainLossPercentage||0).toFixed(1),"%)"]})]})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series performance data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Series by Count"}),f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(r=>({name:r,count:s.filter(d=>d.seriesName===r).length,value:s.filter(d=>d.seriesName===r).reduce((d,G)=>d+(G.purchasePrice||0),0)})).sort((r,d)=>d.count-r.count).slice(0,10).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>M(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Additions"}),s.length>0?e.jsx("div",{className:"space-y-3",children:s.sort((r,d)=>new Date(d.createdAt).getTime()-new Date(r.createdAt).getTime()).slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>A(r),children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white hover:text-blue-400 transition-colors",onClick:d=>{d.stopPropagation(),M(r.seriesName)},children:[r.seriesName," #",r.issueNumber]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Added ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.purchasePrice||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),r.currentValue&&e.jsxs("p",{className:`text-xs ${(r.currentValue||0)>=(r.purchasePrice||0)?"text-emerald-400":"text-red-400"}`,children:["Now: ",(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}),(r.purchasePrice||0)>0&&` (${(r.currentValue||0)>=(r.purchasePrice||0)?"+":""}${(((r.currentValue||0)-(r.purchasePrice||0))/(r.purchasePrice||0)*100).toFixed(1)}%)`]})]})]},r.id))}):e.jsx("p",{className:"text-gray-400",children:"No comics added yet"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Virtual Boxes"}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(r=>({name:r,count:s.filter(d=>d.storageLocation===r).length,value:s.filter(d=>d.storageLocation===r).reduce((d,G)=>d+(G.currentValue||G.purchasePrice||0),0)})).sort((r,d)=>d.value-r.value).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>te(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No virtual boxes specified"})]})]})]})]}),P&&e.jsx(b.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Qe,{comic:C,onSave:be,onCancel:()=>{j(!1),k(void 0)},allSeries:f,allVirtualBoxes:w})})]})}Fe.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(os,{})}));
