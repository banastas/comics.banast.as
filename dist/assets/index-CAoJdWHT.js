const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ComicForm-CtHY1ciT.js","assets/components-DbX9iens.js","assets/icons-BH5OHx2U.js","assets/react-vendor-DavUf6mE.js","assets/ComicDetail-Bmyry_VS.js","assets/SeriesDetail-BTQ0WfH6.js","assets/StorageLocationDetail-BmyCEZa4.js","assets/CoverArtistDetail-ByIt1WwM.js","assets/TagDetail-Dj2wX1BW.js","assets/RawComicsDetail-CJdo98As.js","assets/SlabbedComicsDetail-CWqhQE09.js","assets/StorageLocationsListing-C5HiY1SJ.js","assets/VariantsDetail-CG6-NH0n.js","assets/CsvConverter-CjmEn3bm.js"])))=>i.map(i=>d[i]);
import{j as e,D as de,C as we,a as ye}from"./components-DbX9iens.js";import{R as f,r as _,C as je,c as Ce,B as ae,d as Ne,F as Ve,G as Le,L as ke,e as Te,f as De,g as Pe,h as _e}from"./icons-BH5OHx2U.js";import{a as Re}from"./react-vendor-DavUf6mE.js";import{i as Se}from"./data-hBCSNks3.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();var se={},me;function Ee(){if(me)return se;me=1;var t=Re();return se.createRoot=t.createRoot,se.hydrateRoot=t.hydrateRoot,se}var Fe=Ee();const Ue="modulepreload",Ae=function(t){return"/"+t},he={},z=function(n,o,d){let s=Promise.resolve();if(o&&o.length>0){let k=function(p){return Promise.all(p.map(D=>Promise.resolve(D).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),x=c?.nonce||c?.getAttribute("nonce");s=k(o.map(p=>{if(p=Ae(p),p in he)return;he[p]=!0;const D=p.endsWith(".css"),j=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const y=document.createElement("link");if(y.rel=D?"stylesheet":Ue,D||(y.as="script"),y.crossOrigin="",y.href=p,x&&y.setAttribute("nonce",x),document.head.appendChild(y),D)return new Promise((l,i)=>{y.addEventListener("load",l),y.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(c){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=c,window.dispatchEvent(x),!x.defaultPrevented)throw c}return s.then(c=>{for(const x of c||[])x.status==="rejected"&&a(x.reason);return n().catch(a)})},xe=t=>{let n;const o=new Set,d=(p,D)=>{const j=typeof p=="function"?p(n):p;if(!Object.is(j,n)){const y=n;n=D??(typeof j!="object"||j===null)?j:Object.assign({},n,j),o.forEach(l=>l(n,y))}},s=()=>n,x={setState:d,getState:s,getInitialState:()=>k,subscribe:p=>(o.add(p),()=>o.delete(p))},k=n=t(d,s,x);return x},Ie=t=>t?xe(t):xe,Be=t=>t;function Oe(t,n=Be){const o=f.useSyncExternalStore(t.subscribe,f.useCallback(()=>n(t.getState()),[t,n]),f.useCallback(()=>n(t.getInitialState()),[t,n]));return f.useDebugValue(o),o}const ge=t=>{const n=Ie(t),o=d=>Oe(n,d);return Object.assign(o,n),o},ze=t=>t?ge(t):ge,J=(t,n,o,d)=>{let s=[...t];if(n.searchTerm){const a=n.searchTerm.toLowerCase();s=s.filter(c=>c.title.toLowerCase().includes(a)||c.seriesName.toLowerCase().includes(a)||c.notes.toLowerCase().includes(a)||c.signedBy.toLowerCase().includes(a)||c.coverArtist.toLowerCase().includes(a))}return n.seriesName&&(s=s.filter(a=>a.seriesName.toLowerCase().includes(n.seriesName.toLowerCase()))),s=s.filter(a=>a.grade>=n.minGrade&&a.grade<=n.maxGrade),s=s.filter(a=>a.purchasePrice>=n.minPrice&&a.purchasePrice<=n.maxPrice),n.isSlabbed!==null&&(s=s.filter(a=>a.isSlabbed===n.isSlabbed)),n.isSigned!==null&&(s=s.filter(a=>n.isSigned?a.signedBy.trim()!=="":a.signedBy.trim()==="")),n.tags.length>0&&(s=s.filter(a=>n.tags.some(c=>a.tags.includes(c)))),s.sort((a,c)=>{let x=a[o],k=c[o];return o==="issueNumber"?(x=parseFloat(x)||0,k=parseFloat(k)||0):o==="releaseDate"||o==="purchaseDate"?(x=new Date(x).getTime(),k=new Date(k).getTime()):typeof x=="string"&&(x=x.toLowerCase(),k=k.toLowerCase()),x<k?d==="asc"?-1:1:x>k?d==="asc"?1:-1:0}),s},be={searchTerm:"",seriesName:"",minGrade:.5,maxGrade:10,minPrice:0,maxPrice:1e4,isSlabbed:null,isSigned:null,tags:[]},$e=ze((t,n)=>{const o=Se,d=J(o,be,"releaseDate","desc");return{comics:o,filteredComics:d,filters:be,sortField:"releaseDate",sortDirection:"desc",loading:!1,showForm:!1,editingComic:void 0,activeTab:"collection",selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,viewMode:"grid",showVirtualBoxes:!1,showCsvConverter:!1,setComics:s=>t(a=>{const c=J(s,a.filters,a.sortField,a.sortDirection);return{comics:s,filteredComics:c}}),setFilteredComics:s=>t({filteredComics:s}),setFilters:s=>t(a=>{const c={...a.filters,...s},x=J(a.comics,c,a.sortField,a.sortDirection);return{filters:c,filteredComics:x}}),setSortField:s=>t(a=>{const c=J(a.comics,a.filters,s,a.sortDirection);return{sortField:s,filteredComics:c}}),setSortDirection:s=>t(a=>{const c=J(a.comics,a.filters,a.sortField,s);return{sortDirection:s,filteredComics:c}}),setLoading:s=>t({loading:s}),setShowForm:s=>t({showForm:s}),setEditingComic:s=>t({editingComic:s}),setActiveTab:s=>t({activeTab:s}),setSelectedComic:s=>t({selectedComic:s}),setSelectedSeries:s=>t({selectedSeries:s}),setSelectedStorageLocation:s=>t({selectedStorageLocation:s}),setSelectedCoverArtist:s=>t({selectedCoverArtist:s}),setSelectedTag:s=>t({selectedTag:s}),setSelectedCondition:s=>t({selectedCondition:s}),setViewMode:s=>t({viewMode:s}),setShowVirtualBoxes:s=>t({showVirtualBoxes:s}),setShowCsvConverter:s=>t({showCsvConverter:s}),addComic:s=>{const a={...s,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(c=>({comics:[...c.comics,a],showForm:!1,editingComic:void 0}))},updateComic:(s,a)=>{t(c=>({comics:c.comics.map(x=>x.id===s?{...x,...a,updatedAt:new Date().toISOString()}:x),showForm:!1,editingComic:void 0}))},deleteComic:s=>{t(a=>({comics:a.comics.filter(c=>c.id!==s)}))},navigateToComic:s=>t({selectedComic:s,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToSeries:s=>t({selectedSeries:s,selectedComic:void 0,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToStorageLocation:s=>t({selectedStorageLocation:s,selectedComic:void 0,selectedSeries:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCoverArtist:s=>t({selectedCoverArtist:s,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToTag:s=>t({selectedTag:s,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToCondition:s=>t({selectedCondition:s,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,showVirtualBoxes:!1,showCsvConverter:!1}),navigateToVirtualBoxes:()=>t({showVirtualBoxes:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showCsvConverter:!1}),navigateToCsvConverter:()=>t({showCsvConverter:!0,selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1}),backToCollection:()=>t({selectedComic:void 0,selectedSeries:null,selectedStorageLocation:null,selectedCoverArtist:null,selectedTag:null,selectedCondition:null,showVirtualBoxes:!1,showCsvConverter:!1,showForm:!1,editingComic:void 0}),get stats(){const s=n(),a=s.comics.filter(l=>l.currentValue!==void 0),c=s.comics.reduce((l,i)=>l+(i.purchasePrice||0),0),x=a.reduce((l,i)=>l+(i.currentValue||0),0),k=x-a.reduce((l,i)=>l+(i.purchasePrice||0),0),p=a.length>0?k/a.reduce((l,i)=>l+(i.purchasePrice||0),0)*100:0,D=a.reduce((l,i)=>{const v=(i.currentValue||0)-(i.purchasePrice||0),b=l?(l.currentValue||0)-(l.purchasePrice||0):-1/0;return v>b?i:l},null),j=a.reduce((l,i)=>{const v=(i.currentValue||0)-(i.purchasePrice||0),b=l?(l.currentValue||0)-(l.purchasePrice||0):1/0;return v<b?i:l},null);return{totalComics:s.comics.length,totalValue:c,totalPurchaseValue:c,totalCurrentValue:x,highestValuedComic:s.comics.reduce((l,i)=>!l||i.purchasePrice>l.purchasePrice?i:l,null),highestValuedSlabbedComic:s.comics.filter(l=>l.isSlabbed).reduce((l,i)=>{const v=i.currentValue||i.purchasePrice,b=l?l.currentValue||l.purchasePrice:0;return v>b?i:l},null),highestValuedRawComic:s.comics.filter(l=>!l.isSlabbed).reduce((l,i)=>{const v=i.currentValue||i.purchasePrice,b=l?l.currentValue||l.purchasePrice:0;return v>b?i:l},null),biggestGainer:D,biggestLoser:j,rawComics:s.comics.filter(l=>!l.isSlabbed).length,slabbedComics:s.comics.filter(l=>l.isSlabbed).length,signedComics:s.comics.filter(l=>l.signedBy.trim()!=="").length,averageGrade:s.comics.length>0?s.comics.reduce((l,i)=>l+i.grade,0)/s.comics.length:0,totalGainLoss:k,totalGainLossPercentage:p,comicsWithCurrentValue:a.length}},get allSeries(){return Array.from(new Set(n().comics.map(s=>s.seriesName))).sort()},get allVirtualBoxes(){return Array.from(new Set(n().comics.map(s=>s.storageLocation).filter(Boolean))).sort()},get variantsCount(){return n().comics.filter(s=>s.isVariant).length}}}),Me=()=>{const t=window.location.hash.slice(1),[n,o]=t.split("?"),d={};if(o){const s=new URLSearchParams(o);s.has("tab")&&(d.tab=s.get("tab")),s.has("view")&&(d.viewMode=s.get("view")),s.has("search")&&(d.searchTerm=s.get("search")||void 0),s.has("sort")&&(d.sortField=s.get("sort")||void 0),s.has("order")&&(d.sortDirection=s.get("order"))}return{route:n||"/",params:d}},Ge=t=>{const n=t.split("/").filter(Boolean),o={};if(n.length===0)return{type:"home",params:o};const[d,...s]=n;switch(d){case"comic":s.length>0&&(o.comicId=decodeURIComponent(s[0]));break;case"series":s.length>0&&(o.seriesName=decodeURIComponent(s[0]));break;case"storage":s.length>0&&(o.storageLocation=decodeURIComponent(s[0]));break;case"artist":s.length>0&&(o.coverArtist=decodeURIComponent(s[0]));break;case"tag":s.length>0&&(o.tag=decodeURIComponent(s[0]));break;case"raw":o.condition="raw";break;case"slabbed":o.condition="slabbed";break;case"variants":o.condition="variants";break;case"boxes":break;case"csv":break;case"collection":case"stats":o.tab=d;break}return{type:d,params:o}},We=(t,n=!1)=>{n?window.history.replaceState(null,"",t):window.history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("urlchange",{detail:{url:t}}))},qe=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch(n){return console.error("Failed to copy URL to clipboard:",n),!1}},Ke=()=>window.location.href,Ye=({activeTab:t,selectedComic:n,selectedSeries:o,selectedStorageLocation:d,selectedCoverArtist:s,selectedTag:a,selectedCondition:c,showVirtualBoxes:x,showCsvConverter:k,viewMode:p,searchTerm:D,sortField:j,sortDirection:y,setActiveTab:l,setSelectedComic:i,setSelectedSeries:v,setSelectedStorageLocation:b,setSelectedCoverArtist:C,setSelectedTag:T,setSelectedCondition:u,setShowVirtualBoxes:N,setShowCsvConverter:V,setViewMode:S,setFilters:W,setSortField:E,setSortDirection:q,allComics:F})=>{const Y=_.useCallback((B,h,L,w=!1)=>{i(void 0),v(null),b(null),C(null),T(null),u(null),N(!1),V(!1);let g="";switch(B){case"home":g="/";break;case"collection":g="/collection";break;case"stats":g="/stats";break;case"comic":g=`/comic/${encodeURIComponent(h||"")}`;break;case"series":g=`/series/${encodeURIComponent(h||"")}`;break;case"storage":g=`/storage/${encodeURIComponent(h||"")}`;break;case"artist":g=`/artist/${encodeURIComponent(h||"")}`;break;case"tag":g=`/tag/${encodeURIComponent(h||"")}`;break;case"raw":g="/raw";break;case"slabbed":g="/slabbed";break;case"variants":g="/variants";break;case"boxes":g="/boxes";break;case"csv":g="/csv";break;default:g="/"}const I=new URLSearchParams;L?.tab&&I.set("tab",L.tab),L?.viewMode&&I.set("view",L.viewMode),L?.searchTerm&&I.set("search",L.searchTerm),L?.sortField&&I.set("sort",L.sortField),L?.sortDirection&&I.set("order",L.sortDirection);const H=I.toString(),U=g+(H?`?${H}`:"");We(`#${U}`,w)},[i,v,b,C,T,u,N,V]),R=_.useCallback(()=>{const{route:B,params:h}=Me(),{type:L,params:w}=Ge(B);switch(h.tab&&h.tab!==t&&l(h.tab),h.viewMode&&h.viewMode!==p&&S(h.viewMode),h.searchTerm!==void 0&&h.searchTerm!==D&&W({searchTerm:h.searchTerm}),h.sortField&&h.sortField!==j&&E(h.sortField),h.sortDirection&&h.sortDirection!==y&&q(h.sortDirection),L){case"home":case"collection":i(void 0),v(null),b(null),C(null),T(null),u(null),N(!1),V(!1);break;case"stats":l("stats"),i(void 0),v(null),b(null),C(null),T(null),u(null),N(!1),V(!1);break;case"comic":if(w.comicId){const g=F.find(I=>I.id===w.comicId);g&&(i(g),v(null),b(null),C(null),T(null),u(null),N(!1),V(!1))}break;case"series":w.seriesName&&(v(w.seriesName),i(void 0),b(null),C(null),T(null),u(null),N(!1),V(!1));break;case"storage":w.storageLocation&&(b(w.storageLocation),i(void 0),v(null),C(null),T(null),u(null),N(!1),V(!1));break;case"artist":w.coverArtist&&(C(w.coverArtist),i(void 0),v(null),b(null),T(null),u(null),N(!1),V(!1));break;case"tag":w.tag&&(T(w.tag),i(void 0),v(null),b(null),C(null),u(null),N(!1),V(!1));break;case"raw":u("raw"),i(void 0),v(null),b(null),C(null),T(null),N(!1),V(!1);break;case"slabbed":u("slabbed"),i(void 0),v(null),b(null),C(null),T(null),N(!1),V(!1);break;case"variants":u("variants"),i(void 0),v(null),b(null),C(null),T(null),N(!1),V(!1);break;case"boxes":N(!0),i(void 0),v(null),b(null),C(null),T(null),u(null),V(!1);break;case"csv":V(!0),i(void 0),v(null),b(null),C(null),T(null),u(null),N(!1);break}},[t,p,D,j,y,F,l,S,W,E,q,i,v,b,C,T,u,N,V]);return _.useEffect(()=>{R();const B=()=>{R()},h=()=>{R()};return window.addEventListener("popstate",B),window.addEventListener("urlchange",h),()=>{window.removeEventListener("popstate",B),window.removeEventListener("urlchange",h)}},[R]),{navigateToRoute:Y}},He=({className:t="",title:n="Share URL",size:o=16})=>{const[d,s]=_.useState(!1),a=async()=>{const c=Ke();await qe(c)&&(s(!0),setTimeout(()=>s(!1),2e3))};return e.jsx("button",{onClick:a,className:`p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors ${t}`,title:n,children:d?e.jsx(je,{size:o,className:"text-green-400"}):e.jsx(Ce,{size:o})})},Je=f.lazy(()=>z(()=>import("./ComicForm-CtHY1ciT.js"),__vite__mapDeps([0,1,2,3])).then(t=>({default:t.ComicForm}))),Qe=f.lazy(()=>z(()=>import("./ComicDetail-Bmyry_VS.js"),__vite__mapDeps([4,1,2,3])).then(t=>({default:t.ComicDetail}))),Xe=f.lazy(()=>z(()=>import("./SeriesDetail-BTQ0WfH6.js"),__vite__mapDeps([5,1,2,3])).then(t=>({default:t.SeriesDetail}))),Ze=f.lazy(()=>z(()=>import("./StorageLocationDetail-BmyCEZa4.js"),__vite__mapDeps([6,1,2,3])).then(t=>({default:t.StorageLocationDetail}))),es=f.lazy(()=>z(()=>import("./CoverArtistDetail-ByIt1WwM.js"),__vite__mapDeps([7,1,2,3])).then(t=>({default:t.CoverArtistDetail}))),ss=f.lazy(()=>z(()=>import("./TagDetail-Dj2wX1BW.js"),__vite__mapDeps([8,1,2,3])).then(t=>({default:t.TagDetail}))),ts=f.lazy(()=>z(()=>import("./RawComicsDetail-CJdo98As.js"),__vite__mapDeps([9,1,2,3])).then(t=>({default:t.RawComicsDetail}))),rs=f.lazy(()=>z(()=>import("./SlabbedComicsDetail-CWqhQE09.js"),__vite__mapDeps([10,1,2,3])).then(t=>({default:t.SlabbedComicsDetail}))),as=f.lazy(()=>z(()=>import("./StorageLocationsListing-C5HiY1SJ.js"),__vite__mapDeps([11,1,2,3])).then(t=>({default:t.StorageLocationsListing}))),ls=f.lazy(()=>z(()=>import("./VariantsDetail-CG6-NH0n.js"),__vite__mapDeps([12,1,2,3])).then(t=>({default:t.VariantsDetail}))),ns=f.lazy(()=>z(()=>import("./CsvConverter-CjmEn3bm.js"),__vite__mapDeps([13,1,2,3])).then(t=>({default:t.CsvConverter}))),O=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading..."})]})});function is(){const{comics:t,filteredComics:n,stats:o,filters:d,sortField:s,sortDirection:a,loading:c,addComic:x,updateComic:k,setFilters:p,setSortField:D,setSortDirection:j,allSeries:y,allVirtualBoxes:l,variantsCount:i}=$e(),[v,b]=_.useState(!1),[C,T]=_.useState(void 0),[u,N]=_.useState("collection"),[V,S]=_.useState(void 0),[W,E]=_.useState(null),[q,F]=_.useState(null),[Y,R]=_.useState(null),[B,h]=_.useState(null),[L,w]=_.useState(null),[g,I]=_.useState("grid"),[H,U]=_.useState(!1),[le,Q]=_.useState(!1),{navigateToRoute:P}=Ye({activeTab:u,selectedComic:V,selectedSeries:W,selectedStorageLocation:q,selectedCoverArtist:Y,selectedTag:B,selectedCondition:L,showVirtualBoxes:H,showCsvConverter:le,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a,setActiveTab:N,setSelectedComic:S,setSelectedSeries:E,setSelectedStorageLocation:F,setSelectedCoverArtist:R,setSelectedTag:h,setSelectedCondition:w,setShowVirtualBoxes:U,setShowCsvConverter:Q,setViewMode:I,setFilters:p,setSortField:D,setSortDirection:j,allComics:t}),fe=r=>{C?k(C.id,r):x(r),b(!1),T(void 0)},A=r=>{S(r),E(null),F(null),R(null),h(null),w(null),U(!1),P("comic",r.id,{tab:u})},$=()=>{S(void 0),E(null),F(null),R(null),h(null),w(null),U(!1),Q(!1),P("collection",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},M=r=>{E(r),S(void 0),F(null),R(null),h(null),w(null),U(!1),P("series",r,{tab:u})},te=r=>{F(r),S(void 0),E(null),R(null),h(null),w(null),U(!1),P("storage",r,{tab:u})},pe=r=>{R(r),S(void 0),E(null),F(null),h(null),w(null),U(!1),P("artist",r,{tab:u})},ne=r=>{h(r),S(void 0),E(null),F(null),R(null),w(null),U(!1),P("tag",r,{tab:u})},X=()=>{w("raw"),S(void 0),E(null),F(null),R(null),h(null),U(!1),P("raw",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},Z=()=>{w("slabbed"),S(void 0),E(null),F(null),R(null),h(null),U(!1),P("slabbed",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},ie=()=>{w("variants"),S(void 0),E(null),F(null),R(null),h(null),U(!1),P("variants",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},oe=()=>{U(!0),S(void 0),E(null),F(null),R(null),h(null),w(null),Q(!1),P("boxes",void 0,{tab:u})};if(c)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading your collection..."})]})});if(le)return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ns,{onBack:$})});if(H)return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(as,{allComics:t,onBack:$,onViewStorageLocation:te})});if(V)return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Qe,{comic:V,allComics:t,onBack:$,onView:A,onViewSeries:M,onViewStorageLocation:te,onViewCoverArtist:pe,onViewTag:ne,onViewRawComics:X,onViewSlabbedComics:Z})});if(W){const r=t.filter(m=>m.seriesName===W);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Xe,{seriesName:W||"",seriesComics:r,onBack:$,onView:A})})}if(q){const r=t.filter(m=>m.storageLocation===q);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Ze,{storageLocation:q||"",locationComics:r,onBack:$,onView:A,onViewSeries:M})})}if(Y){const r=t.filter(m=>m.coverArtist===Y);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(es,{coverArtist:Y||"",artistComics:r,onBack:$,onView:A,onViewSeries:M})})}if(B){const r=t.filter(m=>m.tags.includes(B||""));return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ss,{tag:B||"",tagComics:r,onBack:$,onView:A,onViewSeries:M,onViewTag:ne})})}if(L==="raw"){const r=t.filter(m=>!m.isSlabbed);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ts,{rawComics:r,onBack:$,onView:A,onViewSeries:M})})}if(L==="slabbed"){const r=t.filter(m=>m.isSlabbed);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(rs,{slabbedComics:r,onBack:$,onView:A,onViewSeries:M})})}if(L==="variants"){const r=t.filter(m=>m.isVariant);return e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(ls,{variantComics:r,onBack:$,onView:A,onViewRawComics:X,onViewSlabbedComics:Z,onViewSeries:M})})}return e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsx("header",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg shadow-lg",children:e.jsx(ae,{size:24,className:"text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"comics.banast.as"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-300",children:[o.totalComics," comics"]})]})]}),u==="collection"&&e.jsx("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-1 max-w-2xl mx-4",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ne,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search comics...",value:d.searchTerm,onChange:r=>{p({...d,searchTerm:r.target.value}),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:g,searchTerm:r.target.value,sortField:s,sortDirection:a})},className:"w-full pl-9 pr-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-white placeholder-gray-400 text-sm"})]})}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[e.jsx(He,{title:"Copy URL to clipboard"}),u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Q(!0),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",title:"CSV Converter",children:e.jsx(Ve,{size:16})}),e.jsxs("div",{className:"flex items-center space-x-2 border border-gray-600 rounded-lg",children:[e.jsx("button",{onClick:()=>{I("grid"),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"grid",searchTerm:d.searchTerm,sortField:s,sortDirection:a})},className:`p-2 rounded-l-lg transition-colors ${g==="grid"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(Le,{size:16})}),e.jsx("button",{onClick:()=>{I("list"),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:"list",searchTerm:d.searchTerm,sortField:s,sortDirection:a})},className:`p-2 rounded-r-lg transition-colors ${g==="list"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:e.jsx(ke,{size:16})})]}),e.jsxs("select",{value:s,onChange:r=>{D(r.target.value),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:r.target.value,sortDirection:a})},className:"bg-gray-700 border border-gray-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm text-white",children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"seriesName",children:"Sort by Series"}),e.jsx("option",{value:"issueNumber",children:"Sort by Issue #"}),e.jsx("option",{value:"releaseDate",children:"Sort by Release Date"}),e.jsx("option",{value:"grade",children:"Sort by Grade"}),e.jsx("option",{value:"purchasePrice",children:"Sort by Purchase Price"}),e.jsx("option",{value:"currentValue",children:"Sort by Current Value"}),e.jsx("option",{value:"purchaseDate",children:"Sort by Purchase Date"})]}),e.jsx("button",{onClick:()=>{const r=a==="asc"?"desc":"asc";j(r),P(u==="stats"?"stats":"collection",void 0,{tab:u,viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:r})},className:"p-1.5 sm:p-2 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors text-gray-300",children:a==="asc"?e.jsx(Te,{size:14,className:"sm:w-4 sm:h-4"}):e.jsx(De,{size:14,className:"sm:w-4 sm:h-4"})})]})]})]})})}),e.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:[e.jsx("button",{onClick:()=>{N("collection"),P("collection",void 0,{tab:"collection",viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="collection"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(ae,{size:16}),e.jsx("span",{children:"Collection"})]})}),e.jsx("button",{onClick:()=>{N("stats"),P("stats",void 0,{tab:"stats",viewMode:g,searchTerm:d.searchTerm,sortField:s,sortDirection:a})},className:`py-4 px-1 border-b-2 font-medium text-sm ${u==="stats"?"border-blue-400 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-600"} transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 whitespace-nowrap",children:[e.jsx(Pe,{size:16}),e.jsx("span",{children:"Statistics"})]})})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:[u==="collection"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-4 sm:pt-6 lg:pt-8",children:e.jsx(de,{stats:o,onViewComic:A,onViewRawComics:X,onViewSlabbedComics:Z,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:l.length,variantsCount:i})}),n.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(ae,{size:48,className:"mx-auto text-gray-500 mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-white mb-2",children:t.length===0?"No comics in your collection":"No comics match your filters"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-400 mb-4 sm:mb-6 px-4",children:t.length===0?"Start building your collection by adding your first comic!":"Try adjusting your search criteria or filters."}),t.length===0&&e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center space-x-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors mx-auto shadow-lg",children:[e.jsx(_e,{size:20}),e.jsx("span",{children:"Add Your First Comic"})]})]}):e.jsx(e.Fragment,{children:g==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:n.map(r=>e.jsx(we,{comic:r,onView:A},r.id))}):e.jsx(ye,{comics:n,onView:A})})]}),u==="stats"&&e.jsxs("div",{className:"space-y-8 pt-4 sm:pt-6 lg:pt-8",children:[e.jsx(de,{stats:o,showDetailed:u==="stats",onViewComic:A,onViewRawComics:X,onViewSlabbedComics:Z,onViewVariants:ie,onViewVirtualBoxes:oe,virtualBoxesCount:l.length,variantsCount:i,hideSlabbedCard:L==="slabbed",hideRawCard:L==="raw"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.comicsWithCurrentValue>0&&e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Series Performance"}),y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(r=>{const m=t.filter(K=>K.seriesName===r),G=m.filter(K=>K.currentValue!==void 0),ee=G.reduce((K,re)=>K+(re.purchasePrice||0),0),ce=G.reduce((K,re)=>K+(re.currentValue||0),0),ue=ce-ee,ve=ee>0?ue/ee*100:0;return{name:r,count:m.length,countWithValue:G.length,purchaseValue:ee,currentValue:ce,gainLoss:ue,gainLossPercentage:ve}}).filter(r=>r.countWithValue>0).sort((r,m)=>Math.abs(m.gainLossPercentage)-Math.abs(r.gainLossPercentage)).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>M(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.countWithValue," of ",r.count," comics valued"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),e.jsxs("p",{className:`text-sm font-medium ${r.gainLoss>=0?"text-emerald-400":"text-red-400"}`,children:[r.gainLoss>=0?"+":"",(r.gainLoss||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})," (",(r.gainLossPercentage||0)>=0?"+":"",(r.gainLossPercentage||0).toFixed(1),"%)"]})]})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series performance data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Series by Count"}),y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(r=>({name:r,count:t.filter(m=>m.seriesName===r).length,value:t.filter(m=>m.seriesName===r).reduce((m,G)=>m+(G.purchasePrice||0),0)})).sort((r,m)=>m.count-r.count).slice(0,10).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>M(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No series data available"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Additions"}),t.length>0?e.jsx("div",{className:"space-y-3",children:t.sort((r,m)=>new Date(m.createdAt).getTime()-new Date(r.createdAt).getTime()).slice(0,5).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>A(r),children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white hover:text-blue-400 transition-colors",onClick:m=>{m.stopPropagation(),M(r.seriesName)},children:[r.seriesName," #",r.issueNumber]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Added ",new Date(r.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-white",children:(r.purchasePrice||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})}),r.currentValue&&e.jsxs("p",{className:`text-xs ${(r.currentValue||0)>=(r.purchasePrice||0)?"text-emerald-400":"text-red-400"}`,children:["Now: ",(r.currentValue||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}),(r.purchasePrice||0)>0&&` (${(r.currentValue||0)>=(r.purchasePrice||0)?"+":""}${(((r.currentValue||0)-(r.purchasePrice||0))/(r.purchasePrice||0)*100).toFixed(1)}%)`]})]})]},r.id))}):e.jsx("p",{className:"text-gray-400",children:"No comics added yet"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Virtual Boxes"}),l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(r=>({name:r,count:t.filter(m=>m.storageLocation===r).length,value:t.filter(m=>m.storageLocation===r).reduce((m,G)=>m+(G.currentValue||G.purchasePrice||0),0)})).sort((r,m)=>m.value-r.value).slice(0,8).map(r=>e.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-700/50 rounded-lg p-2 transition-colors",onClick:()=>te(r.name),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[r.count," comics"]})]}),e.jsx("p",{className:"font-semibold text-white",children:(r.value||0).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2})})]},r.name))}):e.jsx("p",{className:"text-gray-400",children:"No virtual boxes specified"})]})]})]})]}),v&&e.jsx(f.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(Je,{comic:C,onSave:fe,onCancel:()=>{b(!1),T(void 0)},allSeries:y,allVirtualBoxes:l})})]})}Fe.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(is,{})}));
