import{j as s,D as C}from"./components-Bqs5Wn09.js";import{r as x,i as k,G,L,b as y,S as f}from"./icons-Bf2zPGvD.js";import"./react-vendor-D3F3s8fL.js";const B=({seriesName:v,seriesComics:t,onBack:w,onView:i})=>{const[c,o]=x.useState("grid"),[h,V]=x.useState("issue");x.useEffect(()=>{window.scrollTo(0,0)},[]);const u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),P=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n=t.filter(e=>e.currentValue!==void 0),p=t.reduce((e,r)=>e+r.purchasePrice,0),g=n.reduce((e,r)=>e+(r.currentValue||0),0),m=g-n.reduce((e,r)=>e+r.purchasePrice,0),S=n.reduce((e,r)=>{const a=(r.currentValue||0)-r.purchasePrice,l=e?(e.currentValue||0)-e.purchasePrice:-1/0;return a>l?r:e},null),D=n.reduce((e,r)=>{const a=(r.currentValue||0)-r.purchasePrice,l=e?(e.currentValue||0)-e.purchasePrice:1/0;return a<l?r:e},null),I={totalComics:t.length,totalValue:p,totalPurchaseValue:p,totalCurrentValue:g,highestValuedComic:t.reduce((e,r)=>{const a=r.currentValue||r.purchasePrice,l=e?e.currentValue||e.purchasePrice:0;return a>l?r:e},null),highestValuedSlabbedComic:t.filter(e=>e.isSlabbed).reduce((e,r)=>{const a=r.currentValue||r.purchasePrice,l=e?e.currentValue||e.purchasePrice:0;return a>l?r:e},null),highestValuedRawComic:t.filter(e=>!e.isSlabbed).reduce((e,r)=>{const a=r.currentValue||r.purchasePrice,l=e?e.currentValue||e.purchasePrice:0;return a>l?r:e},null),biggestGainer:S,biggestLoser:D,rawComics:t.filter(e=>!e.isSlabbed).length,slabbedComics:t.filter(e=>e.isSlabbed).length,signedComics:t.filter(e=>(e.signedBy||"").trim()!=="").length,averageGrade:t.length>0?t.reduce((e,r)=>e+r.grade,0)/t.length:0,totalGainLoss:m,totalGainLossPercentage:n.length>0&&n.reduce((e,r)=>e+r.purchasePrice,0)>0?m/n.reduce((e,r)=>e+r.purchasePrice,0)*100:0,comicsWithCurrentValue:n.length},d=t.map(e=>e.issueNumber).sort((e,r)=>e-r),b=d[0],j=d[d.length-1],N=[...t].sort((e,r)=>{switch(h){case"issue":return e.issueNumber-r.issueNumber;case"grade":return r.grade-e.grade;case"value":{const a=e.currentValue||e.purchasePrice;return(r.currentValue||r.purchasePrice)-a}case"date":return new Date(r.releaseDate).getTime()-new Date(e.releaseDate).getTime();default:return e.issueNumber-r.issueNumber}});return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsx("div",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("button",{onClick:w,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[s.jsx(k,{size:20}),s.jsx("span",{children:"Back to Collection"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 border border-gray-600 rounded-lg",children:[s.jsx("button",{onClick:()=>o("grid"),className:`p-2 rounded-l-lg transition-colors ${c==="grid"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:s.jsx(G,{size:16})}),s.jsx("button",{onClick:()=>o("list"),className:`p-2 rounded-r-lg transition-colors ${c==="list"?"bg-blue-500 text-white":"text-gray-300 hover:text-white"}`,children:s.jsx(L,{size:16})})]}),s.jsxs("select",{value:h,onChange:e=>V(e.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"issue",children:"Sort by Issue #"}),s.jsx("option",{value:"grade",children:"Sort by Grade"}),s.jsx("option",{value:"value",children:"Sort by Value"}),s.jsx("option",{value:"date",children:"Sort by Release Date"})]})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:v}),s.jsxs("p",{className:"text-gray-300",children:[t.length," issue",t.length!==1?"s":""," in collection",b&&j&&s.jsxs("span",{className:"text-gray-400 ml-2",children:["(#",b," - #",j,")"]})]})]})}),s.jsx(C,{stats:I,showDetailed:!0,onViewComic:i})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Issues in Collection"}),c==="grid"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:N.map(e=>s.jsxs("div",{className:"bg-gray-700/50 rounded-lg border border-gray-600 overflow-hidden hover:border-blue-500 transition-all cursor-pointer group",onClick:()=>i(e),children:[s.jsxs("div",{className:"relative aspect-[2/3] bg-gray-600",children:[e.coverImageUrl?s.jsx("img",{src:e.coverImageUrl,alt:`${e.seriesName} #${e.issueNumber}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(y,{size:32,className:"text-gray-500"})}),s.jsxs("div",{className:"absolute top-1 left-1 flex flex-col space-y-1",children:[e.isSlabbed&&s.jsx("span",{className:"px-1 py-0.5 bg-purple-500 text-white text-xs font-medium rounded",children:"Slab"}),e.signedBy&&s.jsx("span",{className:"px-1 py-0.5 bg-rose-500 text-white text-xs font-medium rounded",children:"Signed"})]})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("p",{className:"font-bold text-white",children:["#",e.issueNumber]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(f,{size:10,className:"text-amber-400"}),s.jsx("span",{className:"text-xs text-white",children:e.grade})]})]}),s.jsx("p",{className:"text-xs text-gray-400 mb-1",children:new Date(e.releaseDate).getFullYear()}),s.jsx("p",{className:"text-xs font-semibold text-green-400",children:u(e.currentValue||e.purchasePrice)})]})]},e.id))}):s.jsx("div",{className:"space-y-2",children:N.map(e=>s.jsx("div",{className:"bg-gray-700/50 rounded-lg border border-gray-600 p-4 hover:border-blue-500 transition-all cursor-pointer group",onClick:()=>i(e),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-16 bg-gray-600 rounded overflow-hidden flex-shrink-0",children:e.coverImageUrl?s.jsx("img",{src:e.coverImageUrl,alt:`${e.seriesName} #${e.issueNumber}`,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(y,{size:16,className:"text-gray-500"})})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("h4",{className:"font-bold text-white",children:["#",e.issueNumber]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(f,{size:12,className:"text-amber-400"}),s.jsx("span",{className:"text-sm text-white",children:e.grade})]}),e.isSlabbed&&s.jsx("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded border border-purple-500/30",children:"Slabbed"}),e.signedBy&&s.jsx("span",{className:"px-2 py-0.5 bg-rose-500/20 text-rose-300 text-xs rounded border border-rose-500/30",children:"Signed"})]}),s.jsx("p",{className:"text-sm text-gray-300",children:e.title}),s.jsx("p",{className:"text-xs text-gray-400",children:P(e.releaseDate)})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-white",children:u(e.currentValue||e.purchasePrice)}),e.currentValue&&e.currentValue!==e.purchasePrice&&s.jsxs("p",{className:`text-xs ${e.currentValue>e.purchasePrice?"text-emerald-400":"text-red-400"}`,children:[e.currentValue>e.purchasePrice?"+":"",u(e.currentValue-e.purchasePrice),e.purchasePrice>0&&` (${((e.currentValue-e.purchasePrice)/e.purchasePrice*100).toFixed(1)}%)`]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:r=>r.stopPropagation()})]})]})},e.id))})]})]})})]})};export{B as SeriesDetail};
